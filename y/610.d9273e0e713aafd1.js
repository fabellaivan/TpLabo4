(self.webpackChunkappUTN=self.webpackChunkappUTN||[]).push([[610],{3879:(ar,gt,x)=>{"use strict";x.d(gt,{I:()=>ku});var R=x(5861),P=x(5879),y=x(8645),J=x(2096),On=x(5592),ui=x(2459),O=x(3019),Oe=x(3093),Ve=x(4664),Le=x(7398),Ln=x(4552);class v extends y.x{constructor(e=1/0,t=1/0,i=Ln.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:o,_windowTime:l}=this;t||(i.push(e),!s&&i.push(o.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:s}=this,o=s.slice();for(let l=0;l<o.length&&!e.closed;l+=i?1:2)e.next(o[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:s}=this,o=(s?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!s){const l=t.now();let u=0;for(let d=1;d<i.length&&i[d]<=l;d+=2)u=d;u&&i.splice(0,u+1)}}}var fn=x(3020);function Rt(n,e,t){let i,s=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):i=n??1/0,(0,fn.B)({connector:()=>new v(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}var Mn=x(1374),Nt=x(4674);function _e(n,e){return(0,Nt.m)(e)?(0,Ve.w)(()=>n,e):(0,Ve.w)(()=>n)}var He=x(5137),Ht=x(2181),je=x(2793),Me=x(6304),jt=x(6814),Gt=x(2194);x(120);const ae=new P.OlP("angularfire2.auth.use-emulator"),mt=new P.OlP("angularfire2.auth.settings"),ve=new P.OlP("angularfire2.auth.tenant-id"),H=new P.OlP("angularfire2.auth.langugage-code"),Ze=new P.OlP("angularfire2.auth.use-device-language"),Fn=new P.OlP("angularfire.auth.persistence"),pn=(n,e,t,i,s,o,l,u)=>(0,Me.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const d=e.runOutsideAngular(()=>n.auth());if(t&&d.useEmulator(...t),i&&(d.tenantId=i),d.languageCode=s,o&&d.useDeviceLanguage(),l)for(const[p,_]of Object.entries(l))d.settings[p]=_;return u&&d.setPersistence(u),d},[t,i,s,o,l,u]);let Xe=(()=>{class n{constructor(t,i,s,o,l,u,d,p,_,b,E,S){const k=new y.x,V=(0,J.of)(void 0).pipe((0,Oe.Q)(l.outsideAngular),(0,Ve.w)(()=>o.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,8661)))),(0,Le.U)(()=>(0,Me.on)(t,o,i)),(0,Le.U)(se=>pn(se,o,u,p,_,b,d,E)),Rt({bufferSize:1,refCount:!1}));if((0,jt.PM)(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{V.pipe((0,Mn.P)()).subscribe();const De=V.pipe((0,Ve.w)(me=>me.getRedirectResult().then(Vt=>Vt,()=>null)),je.iC,Rt({bufferSize:1,refCount:!1})),qe=V.pipe((0,Ve.w)(me=>new On.y(Vt=>({unsubscribe:o.runOutsideAngular(()=>me.onAuthStateChanged(Dn=>Vt.next(Dn),Dn=>Vt.error(Dn),()=>Vt.complete()))})))),Pt=V.pipe((0,Ve.w)(me=>new On.y(Vt=>({unsubscribe:o.runOutsideAngular(()=>me.onIdTokenChanged(Dn=>Vt.next(Dn),Dn=>Vt.error(Dn),()=>Vt.complete()))}))));this.authState=De.pipe(_e(qe),(0,He.R)(l.outsideAngular),(0,Oe.Q)(l.insideAngular)),this.user=De.pipe(_e(Pt),(0,He.R)(l.outsideAngular),(0,Oe.Q)(l.insideAngular)),this.idToken=this.user.pipe((0,Ve.w)(me=>me?(0,ui.D)(me.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.w)(me=>me?(0,ui.D)(me.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,O.T)(De,k,this.authState.pipe((0,Ht.h)(me=>!me))).pipe((0,Le.U)(me=>me?.user?me:null),(0,He.R)(l.outsideAngular),(0,Oe.Q)(l.insideAngular))}return(0,Me.pX)(this,V,o,{spy:{apply:(se,De,qe)=>{(se.startsWith("signIn")||se.startsWith("createUser"))&&qe.then(Pt=>k.next(Pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(Me.Dh),P.LFG(Me.xv,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(je.HU),P.LFG(ae,8),P.LFG(mt,8),P.LFG(ve,8),P.LFG(H,8),P.LFG(Ze,8),P.LFG(Fn,8),P.LFG(Gt.nm,8))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var gn=x(6321),Dt=x(6699),Pe=x(3997),ot=x(9360),Ge=x(8251),hi=x(4829),_t=x(2737),ze=x(2420),Bn=x(4564);x(8661);var _n=x(3399),at=x(4537),Je=x(7592),h=x(9058),de=x(7879);const Re="@firebase/database";let fe="";function Lt(n){fe=n}class be{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,h.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,h.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class wt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,h.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const W=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new be(e)}}catch{}return new wt},pe=W("localStorage"),Se=W("sessionStorage"),Ce=new de.Yd("@firebase/database"),le=function(){let n=1;return function(){return n++}}(),ce=function(n){const e=(0,h.dS)(n),t=new h.gQ;t.update(e);const i=t.digest();return h.US.encodeByteArray(i)},yt=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=yt.apply(null,i):e+="object"==typeof i?(0,h.Wl)(i):i,e+=" "}return e};let he=null,we=!0;const Un=function(n,e){(0,h.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Ce.logLevel=de.in.VERBOSE,he=Ce.log.bind(Ce),e&&Se.set("logging_enabled",!0)):"function"==typeof n?he=n:(he=null,Se.remove("logging_enabled"))},re=function(...n){if(!0===we&&(we=!1,null===he&&!0===Se.get("logging_enabled")&&Un(!0)),he){const e=yt.apply(null,n);he(e)}},vt=function(n){return function(...e){re(n,...e)}},bt=function(...n){const e="FIREBASE INTERNAL ERROR: "+yt(...n);Ce.error(e)},X=function(...n){const e=`FIREBASE FATAL ERROR: ${yt(...n)}`;throw Ce.error(e),new Error(e)},oe=function(...n){const e="FIREBASE WARNING: "+yt(...n);Ce.warn(e)},Yt=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ae="[MIN_NAME]",Fe="[MAX_NAME]",et=function(n,e){if(n===e)return 0;if(n===Ae||e===Fe)return-1;if(e===Ae||n===Fe)return 1;{const t=j(n),i=j(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},fi=function(n,e){return n===e?0:n<e?-1:1},lt=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,h.Wl)(e))},Mt=function(n){if("object"!=typeof n||null===n)return(0,h.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,h.Wl)(e[i]),t+=":",t+=Mt(n[e[i]]);return t+="}",t},Vn=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)i.push(n.substring(s,s+e>t?t:s+e));return i};function ue(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const tt=function(n){(0,h.hu)(!Yt(n),"Invalid JSON number");const i=1023;let s,o,l,u,d;0===n?(o=0,l=0,s=1/n==-1/0?1:0):(s=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(u=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=u+i,l=Math.round(n*Math.pow(2,52-u)-Math.pow(2,52))):(o=0,l=Math.round(n/Math.pow(2,-1074))));const p=[];for(d=52;d;d-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(d=11;d;d-=1)p.push(o%2?1:0),o=Math.floor(o/2);p.push(s?1:0),p.reverse();const _=p.join("");let b="";for(d=0;d<64;d+=8){let E=parseInt(_.substr(d,8),2).toString(16);1===E.length&&(E="0"+E),b+=E}return b.toLowerCase()},I=new RegExp("^-?(0*)\\d{1,10}$"),j=function(n){if(I.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},G=function(n){try{n()}catch(e){setTimeout(()=>{throw oe("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},D=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Be{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){oe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class z{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(re("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',oe(e)}}let ke=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const pi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ns="websocket",is="long_polling";class jn{constructor(e,t,i,s,o=!1,l="",u=!1,d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=u,this.isUsingEmulator=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pe.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pe.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ss(n,e,t){let i;if((0,h.hu)("string"==typeof e,"typeof type must == string"),(0,h.hu)("object"==typeof t,"typeof params must == object"),e===ns)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==is)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function lr(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const s=[];return ue(t,(o,l)=>{s.push(o+"="+l)}),i+s.join("&")}class cr{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,h.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,h.p$)(this.counters_)}}const Gn={},mi={};function zn(n){const e=n.toString();return Gn[e]||(Gn[e]=new cr),Gn[e]}class dr{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&G(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ct{constructor(e,t,i,s,o,l,u){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=l,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vt(e),this.stats_=zn(t),this.urlFn=d=>(this.appCheckToken&&(d.ac=this.appCheckToken),ss(t,is,d))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,h.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wi((...o)=>{const[l,u,d,p,_]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=u,this.password=d;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);u?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(u,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[l,u]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,u)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&pi.test(location.hostname)&&(i.r="f");const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ct.forceAllow_=!0}static forceDisallow(){Ct.forceDisallow_=!0}static isAvailable(){return!((0,h.Yr)()||!Ct.forceAllow_&&(Ct.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,h.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,h.h$)(t),s=Vn(i,1840);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,h.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,h.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wi{constructor(e,t,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,h.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=le(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=wi.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(u){re("frame writing exception"),u.stack&&re(u.stack),re(u)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||re("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const l=this.pendingSegs.shift();i=i+"&seg"+s+"="+l.seg+"&ts"+s+"="+l.ts+"&d"+s+"="+l.d,s++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(s),i()})}addTag(e,t){(0,h.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||"loaded"===s||"complete"===s)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{re("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Et=null;typeof MozWebSocket<"u"?Et=MozWebSocket:typeof WebSocket<"u"&&(Et=WebSocket);let qt=(()=>{class n{constructor(t,i,s,o,l,u,d){this.connId=t,this.applicationId=s,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vt(this.connId),this.stats_=zn(i),this.connURL=n.connectionURL_(i,u,d,o,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,s,o,l){const u={v:"5"};return!(0,h.Yr)()&&typeof location<"u"&&location.hostname&&pi.test(location.hostname)&&(u.r="f"),i&&(u.s=i),s&&(u.ls=s),o&&(u.ac=o),l&&(u.p=l),ss(t,ns,u)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pe.set("previous_websocket_failure",!0);try{let s;if((0,h.Yr)()){s={headers:{"User-Agent":`Firebase/5/${fe}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,u=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;u&&(s.proxy={origin:u})}this.mySock=new Et(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==Et&&!n.forceDisallow_}static previouslyFailed(){return pe.isInMemoryStorage||!0===pe.get("previous_websocket_failure")}markConnectionHealthy(){pe.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const s=(0,h.cI)(i);this.onMessage(s)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,h.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const s=this.extractFrameCount_(i);null!==s&&this.appendFrame_(s)}}send(t){this.resetKeepAlive();const i=(0,h.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const s=Vn(i,16384);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),yi=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Ct,qt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=qt&&qt.isAvailable();let s=i&&!qt.previouslyFailed();if(t.webSocketOnly&&(i||oe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[qt];else{const o=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class ws{constructor(e,t,i,s,o,l,u,d,p,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=l,this.onReady_=u,this.onDisconnect_=d,this.onKill_=p,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vt("c:"+this.id+":"),this.transportManager_=new yi(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=D(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=lt("t",e),i=lt("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=lt("t",e),i=lt("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=lt("t",e);if("d"in e){const i=e.d;if("h"===t){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?bt("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bt("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&oe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),D(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):D(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ci{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Xt{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,h.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context))return void s.splice(o,1)}validateEventType_(e){(0,h.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Yn extends Xt{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,h.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Yn}getInitialEvent(e){return(0,h.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Y{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function U(){return new Y("")}function M(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Tt(n){return n.pieces_.length-n.pieceNum_}function q(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Y(n.pieces_,e)}function Ei(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function vn(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function bs(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Y(e,0)}function ee(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Y)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new Y(t,0)}function F(n){return n.pieceNum_>=n.pieces_.length}function Ie(n,e){const t=M(n),i=M(e);if(null===t)return e;if(t===i)return Ie(q(n),q(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Qn(n,e){const t=vn(n,0),i=vn(e,0);for(let s=0;s<t.length&&s<i.length;s++){const o=et(t[s],i[s]);if(0!==o)return o}return t.length===i.length?0:t.length<i.length?-1:1}function $n(n,e){if(Tt(n)!==Tt(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function We(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Tt(n)>Tt(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Sr{constructor(e,t){this.errorPrefix_=t,this.parts_=vn(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,h.ug)(this.parts_[i]);Es(this)}}function Es(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ct(n))}function ct(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class qn extends Xt{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new qn}getInitialEvent(e){return(0,h.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Jt=1e3;let En,St=(()=>{class n extends Ci{constructor(t,i,s,o,l,u,d,p){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.authOverride_=p,this.id=n.nextPersistentConnectionId_++,this.log_=vt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p&&!(0,h.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qn.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Yn.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,s){const o=++this.requestNumber_,l={r:o,a:t,b:i};this.log_((0,h.Wl)(l)),(0,h.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),s&&(this.requestCBHash_[o]=s)}get(t){this.initConnection_();const i=new h.BH,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:u=>{const d=u.d;"ok"===u.s?i.resolve(d):i.reject(d)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,s,o){this.initConnection_();const l=t._queryIdentifier,u=t._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),(0,h.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,h.hu)(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const d={onComplete:o,hashFn:i,query:t,tag:s};this.listens.get(u).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(t){const i=t.query,s=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+s+" for "+o);const l={p:s};t.tag&&(l.q=i._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,d=>{const p=d.d,_=d.s;n.warnOnListenWarnings_(p,i),(this.listens.get(s)&&this.listens.get(s).get(o))===t&&(this.log_("listen response",d),"ok"!==_&&this.removeListen_(s,o),t.onComplete&&t.onComplete(_,p))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,h.r3)(t,"w")){const s=(0,h.DV)(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',l=i._path.toString();oe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,h.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,h.w9)(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(i,s,o=>{const l=o.s,u=o.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,s=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(t,i){const s=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),(0,h.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,t._queryObject,i)}sendUnlisten_(t,i,s,o){this.log_("Unlisten on "+t+" for "+i);const l={p:t};o&&(l.q=s,l.t=o),this.sendRequest("n",l)}onDisconnectPut(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:s})}onDisconnectMerge(t,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:s})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,s,o){const l={p:i,d:s};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(t,i,s,o){this.putInternal("p",t,i,s,o)}merge(t,i,s,o){this.putInternal("m",t,i,s,o)}putInternal(t,i,s,o,l){this.initConnection_();const u={p:i,d:s};void 0!==l&&(u.h=l),this.outstandingPuts_.push({action:t,request:u,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,s,l=>{this.log_(i+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,s=>{"ok"!==s.s&&this.log_("reportStats","Error sending stats: "+s.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,h.Wl)(t));const i=t.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):bt("Unrecognized action received from server: "+(0,h.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,h.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Jt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,R.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),s=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,u=t.lastSessionId;let d=!1,p=null;const _=function(){p?p.close():(d=!0,o())};t.realtime_={close:_,sendRequest:function(S){(0,h.hu)(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(S)}};const E=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[S,k]=yield Promise.all([t.authTokenProvider_.getToken(E),t.appCheckTokenProvider_.getToken(E)]);d?re("getToken() completed but was canceled"):(re("getToken() completed. Creating connection."),t.authToken_=S&&S.accessToken,t.appCheckToken_=k&&k.token,p=new ws(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,s,o,V=>{oe(V+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},u))}catch(S){t.log_("Failed to get token: "+S),d||(t.repoInfo_.nodeAdmin&&oe(S),_())}}})()}interrupt(t){re("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){re("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,h.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Jt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let s;s=i?i.map(l=>Mt(l)).join("$"):"default";const o=this.removeListen_(t,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const s=new Y(t).toString();let o;if(this.listens.has(s)){const l=this.listens.get(s);o=l.get(i),l.delete(i),0===l.size&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(t,i){re("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){re("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,h.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+fe.replace(/\./g,"-")]=1,(0,h.uI)()?t["framework.cordova"]=1:(0,h.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Yn.getInstance().currentlyOnline();return(0,h.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class B{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new B(e,t)}}class Cn{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new B(Ae,e),s=new B(Ae,t);return 0!==this.compare(i,s)}minPost(){return B.MIN}}class Si extends Cn{static get __EMPTY_NODE(){return En}static set __EMPTY_NODE(e){En=e}compare(e,t){return et(e.name,t.name)}isDefinedOn(e){throw(0,h.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return B.MIN}maxPost(){return new B(Fe,En)}makePost(e,t){return(0,h.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new B(e,En)}toString(){return".key"}}const Ke=new Si;class ut{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,s&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Xn,Ye=(()=>{class n{constructor(t,i,s,o,l){this.key=t,this.value=i,this.color=s??n.RED,this.left=o??xe.EMPTY_NODE,this.right=l??xe.EMPTY_NODE}copy(t,i,s,o,l){return new n(t??this.key,i??this.value,s??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let o=this;const l=s(t,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(t,i,s),null):0===l?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return xe.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let s,o;if(s=this,i(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),0===i(t,s.key)){if(s.right.isEmpty())return xe.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class xe{constructor(e,t=xe.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new xe(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ye.BLACK,null,null))}remove(e){return new xe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ye.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(s=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ut(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ut(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ut(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ut(this.root_,null,this.comparator_,!0,e)}}function Ss(n,e){return et(n.name,e.name)}function Zn(n,e){return et(n,e)}xe.EMPTY_NODE=new class xr{copy(e,t,i,s,o){return this}insert(e,t,i){return new Ye(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const As=function(n){return"number"==typeof n?"number:"+tt(n):"string:"+n},ks=function(n){if(n.isLeafNode()){const e=n.val();(0,h.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,h.r3)(e,".sv"),"Priority must be a string or number.")}else(0,h.hu)(n===Xn||n.isEmpty(),"priority of unexpected type.");(0,h.hu)(n===Xn||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xs,Ps,Ai,Bt=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,h.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ks(this.priorityNode_)}static set __childrenNodeConstructor(t){xs=t}static get __childrenNodeConstructor(){return xs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return F(t)?this:".priority"===M(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const s=M(t);return null===s?i:i.isEmpty()&&".priority"!==s?this:((0,h.hu)(".priority"!==s||1===Tt(t),".priority must be the last token in a path"),this.updateImmediateChild(s,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(q(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+As(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?tt(this.value_):this.value_,this.lazyHash_=ce(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,h.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,s=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),l=n.VALUE_TYPE_ORDER.indexOf(s);return(0,h.hu)(o>=0,"Unknown leaf type: "+i),(0,h.hu)(l>=0,"Unknown leaf type: "+s),o===l?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Z=new class ki extends Cn{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return 0===o?et(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Fe,new Bt("[PRIORITY-POST]",Ai))}makePost(e,t){const i=Ps(e);return new B(t,new Bt("[PRIORITY-POST]",i))}toString(){return".priority"}},Nr=Math.log(2);class Dr{constructor(e){this.count=parseInt(Math.log(e+1)/Nr,10),this.current_=this.count-1;const s=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Jn=function(n,e,t,i){n.sort(e);const s=function(d,p){const _=p-d;let b,E;if(0===_)return null;if(1===_)return b=n[d],E=t?t(b):b,new Ye(E,b.node,Ye.BLACK,null,null);{const S=parseInt(_/2,10)+d,k=s(d,S),V=s(S+1,p);return b=n[S],E=t?t(b):b,new Ye(E,b.node,Ye.BLACK,k,V)}},u=function(d){let p=null,_=null,b=n.length;const E=function(k,V){const se=b-k,De=b;b-=k;const qe=s(se+1,De),Pt=n[se],me=t?t(Pt):Pt;S(new Ye(me,Pt.node,V,null,qe))},S=function(k){p?(p.left=k,p=k):(_=k,p=k)};for(let k=0;k<d.count;++k){const V=d.nextBitIsOne(),se=Math.pow(2,d.count-(k+1));V?E(se,Ye.BLACK):(E(se,Ye.BLACK),E(se,Ye.RED))}return _}(new Dr(n.length));return new xe(i||e,u)};let en;const tn={};class dt{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,h.hu)(tn&&Z,"ChildrenNode.ts has not been loaded"),en=en||new dt({".priority":tn},{".priority":Z}),en}get(e){const t=(0,h.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xe?t:null}hasIndex(e){return(0,h.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,h.hu)(e!==Ke,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(B.Wrap);let u,l=o.getNext();for(;l;)s=s||e.isDefinedOn(l.node),i.push(l),l=o.getNext();u=s?Jn(i,e.getCompare()):tn;const d=e.toString(),p=Object.assign({},this.indexSet_);p[d]=e;const _=Object.assign({},this.indexes_);return _[d]=u,new dt(_,p)}addToIndexes(e,t){const i=(0,h.UI)(this.indexes_,(s,o)=>{const l=(0,h.DV)(this.indexSet_,o);if((0,h.hu)(l,"Missing index implementation for "+o),s===tn){if(l.isDefinedOn(e.node)){const u=[],d=t.getIterator(B.Wrap);let p=d.getNext();for(;p;)p.name!==e.name&&u.push(p),p=d.getNext();return u.push(e),Jn(u,l.getCompare())}return tn}{const u=t.get(e.name);let d=s;return u&&(d=d.remove(new B(e.name,u))),d.insert(e,e.node)}});return new dt(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,h.UI)(this.indexes_,s=>{if(s===tn)return s;{const o=t.get(e.name);return o?s.remove(new B(e.name,o)):s}});return new dt(i,this.indexSet_)}}let In,N=(()=>{class n{constructor(t,i,s){this.children_=t,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&ks(this.priorityNode_),this.children_.isEmpty()&&(0,h.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return In||(In=new n(new xe(Zn),null,dt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||In}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?In:i}}getChild(t){const i=M(t);return null===i?this:this.getImmediateChild(i).getChild(q(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,h.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const s=new B(t,i);let o,l;i.isEmpty()?(o=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(t,i),l=this.indexMap_.addToIndexes(s,this.children_));const u=o.isEmpty()?In:this.priorityNode_;return new n(o,u,l)}}updateChild(t,i){const s=M(t);if(null===s)return i;{(0,h.hu)(".priority"!==M(t)||1===Tt(t),".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(q(t),i);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let s=0,o=0,l=!0;if(this.forEachChild(Z,(u,d)=>{i[u]=d.val(t),s++,l&&n.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!t&&l&&o<2*s){const u=[];for(const d in i)u[d]=i[d];return u}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+As(this.getPriority().val())+":"),this.forEachChild(Z,(i,s)=>{const o=s.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":ce(t)}return this.lazyHash_}getPredecessorChildName(t,i,s){const o=this.resolveIndex_(s);if(o){const l=o.getPredecessorKey(new B(t,i));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.minKey();return s&&s.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new B(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const s=i.maxKey();return s&&s.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new B(i,this.children_.get(i)):null}forEachChild(t,i){const s=this.resolveIndex_(t);return s?s.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,B.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,t)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,B.Wrap);let l=o.peek();for(;null!=l&&i.compare(l,t)>0;)o.getNext(),l=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Tn?-1:0}withIndex(t){if(t===Ke||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ke||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const s=this.getIterator(Z),o=i.getIterator(Z);let l=s.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=s.getNext(),u=o.getNext()}return null===l&&null===u}return!1}return!1}}resolveIndex_(t){return t===Ke?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Tn=new class Ns extends N{constructor(){super(new xe(Zn),N.EMPTY_NODE,dt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return N.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(B,{MIN:{value:new B(Ae,N.EMPTY_NODE)},MAX:{value:new B(Fe,Tn)}}),Si.__EMPTY_NODE=N.EMPTY_NODE,Bt.__childrenNodeConstructor=N,function Pr(n){Xn=n}(Tn),function Rs(n){Ai=n}(Tn);const Or=!0;function ne(n,e=null){if(null===n)return N.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,h.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Bt(n,ne(e));if(n instanceof Array||!Or){let t=N.EMPTY_NODE;return ue(n,(i,s)=>{if((0,h.r3)(n,i)&&"."!==i.substring(0,1)){const o=ne(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(ne(e))}{const t=[];let i=!1;if(ue(n,(l,u)=>{if("."!==l.substring(0,1)){const d=ne(u);d.isEmpty()||(i=i||!d.getPriority().isEmpty(),t.push(new B(l,d)))}}),0===t.length)return N.EMPTY_NODE;const o=Jn(t,Ss,l=>l.name,Zn);if(i){const l=Jn(t,Z.getCompare());return new N(o,ne(e),new dt({".priority":l},{".priority":Z}))}return new N(o,ne(e),dt.Default)}}!function Rr(n){Ps=n}(ne);class xi extends Cn{constructor(e){super(),this.indexPath_=e,(0,h.hu)(!F(e)&&".priority"!==M(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return 0===o?et(e.name,t.name):o}makePost(e,t){const i=ne(e),s=N.EMPTY_NODE.updateChild(this.indexPath_,i);return new B(t,s)}maxPost(){const e=N.EMPTY_NODE.updateChild(this.indexPath_,Tn);return new B(Fe,e)}toString(){return vn(this.indexPath_,0).join("/")}}const ei=new class Ds extends Cn{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?et(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,t){const i=ne(e);return new B(t,i)}toString(){return".value"}};function Os(n){return{type:"value",snapshotNode:n}}function nn(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Sn(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function sn(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ri{constructor(e){this.index_=e}updateChild(e,t,i,s,o,l){(0,h.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const u=e.getImmediateChild(t);return u.getChild(s).equals(i.getChild(s))&&u.isEmpty()===i.isEmpty()||(null!=l&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(Sn(t,u)):(0,h.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):u.isEmpty()?l.trackChildChange(nn(t,i)):l.trackChildChange(sn(t,i,u))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Z,(s,o)=>{t.hasChild(s)||i.trackChildChange(Sn(s,o))}),t.isLeafNode()||t.forEachChild(Z,(s,o)=>{if(e.hasChild(s)){const l=e.getImmediateChild(s);l.equals(o)||i.trackChildChange(sn(s,o,l))}else i.trackChildChange(nn(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?N.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class An{constructor(e){this.indexedFilter_=new Ri(e.getIndex()),this.index_=e.getIndex(),this.startPost_=An.getStartPost_(e),this.endPost_=An.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,o,l){return this.matches(new B(t,i))||(i=N.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,o,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=N.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(N.EMPTY_NODE);const o=this;return t.forEachChild(Z,(l,u)=>{o.matches(new B(l,u))||(s=s.updateImmediateChild(l,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Lr{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new An(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,o,l){return this.rangedFilter_.matches(new B(t,i))||(i=N.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,o,l):this.fullLimitUpdateChild_(e,t,i,o,l)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=N.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;s=N.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const u=o.getNext();if(this.withinDirectionalStart(u)){if(!this.withinDirectionalEnd(u))break;s=s.updateImmediateChild(u.name,u.node),l++}}}else{let o;s=t.withIndex(this.index_),s=s.updatePriority(N.EMPTY_NODE),o=this.reverse_?s.getReverseIterator(this.index_):s.getIterator(this.index_);let l=0;for(;o.hasNext();){const u=o.getNext();l<this.limit_&&this.withinDirectionalStart(u)&&this.withinDirectionalEnd(u)?l++:s=s.updateImmediateChild(u.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,o){let l;if(this.reverse_){const b=this.index_.getCompare();l=(E,S)=>b(S,E)}else l=this.index_.getCompare();const u=e;(0,h.hu)(u.numChildren()===this.limit_,"");const d=new B(t,i),p=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),_=this.rangedFilter_.matches(d);if(u.hasChild(t)){const b=u.getImmediateChild(t);let E=s.getChildAfterChild(this.index_,p,this.reverse_);for(;null!=E&&(E.name===t||u.hasChild(E.name));)E=s.getChildAfterChild(this.index_,E,this.reverse_);const S=null==E?1:l(E,d);if(_&&!i.isEmpty()&&S>=0)return o?.trackChildChange(sn(t,i,b)),u.updateImmediateChild(t,i);{o?.trackChildChange(Sn(t,b));const V=u.updateImmediateChild(t,N.EMPTY_NODE);return null!=E&&this.rangedFilter_.matches(E)?(o?.trackChildChange(nn(E.name,E.node)),V.updateImmediateChild(E.name,E.node)):V}}return i.isEmpty()?e:_&&l(p,d)>=0?(null!=o&&(o.trackChildChange(Sn(p.name,p.node)),o.trackChildChange(nn(t,i))),u.updateImmediateChild(t,i).updateImmediateChild(p.name,N.EMPTY_NODE)):e}}class ti{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Z}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,h.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,h.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ae}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,h.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,h.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,h.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Z}copy(){const e=new ti;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ni(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function Di(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function ni(n,e){const t=n.copy();return t.index_=e,t}function Ms(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Z?t="$priority":n.index_===ei?t="$value":n.index_===Ke?t="$key":((0,h.hu)(n.index_ instanceof xi,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,h.Wl)(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=(0,h.Wl)(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+(0,h.Wl)(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=(0,h.Wl)(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+(0,h.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Fs(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Z&&(e.i=n.index_.toString()),e}class nt extends Ci{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=vt("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,h.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=nt.getListenId_(e,i),u={};this.listens_[l]=u;const d=Ms(e._queryParams);this.restRequest_(o+".json",d,(p,_)=>{let b=_;if(404===p&&(b=null,p=null),null===p&&this.onDataUpdate_(o,b,!1,i),(0,h.DV)(this.listens_,l)===u){let E;E=p?401===p?"permission_denied":"rest_error:"+p:"ok",s(E,null)}})}unlisten(e,t){const i=nt.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Ms(e._queryParams),i=e._path.toString(),s=new h.BH;return this.restRequest_(i+".json",t,(o,l)=>{let u=l;404===o&&(u=null,o=null),null===o?(this.onDataUpdate_(i,u,!1,null),s.resolve(u)):s.reject(new Error(u))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,h.xO)(t);this.log_("Sending REST request for "+l);const u=new XMLHttpRequest;u.onreadystatechange=()=>{if(i&&4===u.readyState){this.log_("REST Response for "+l+" received. status:",u.status,"response:",u.responseText);let d=null;if(u.status>=200&&u.status<300){try{d=(0,h.cI)(u.responseText)}catch{oe("Failed to parse JSON response for "+l+": "+u.responseText)}i(null,d)}else 401!==u.status&&404!==u.status&&oe("Got unsuccessful REST response for "+l+" Status: "+u.status),i(u.status);i=null}},u.open("GET",l,!0),u.send()})}}class Bs{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ii(){return{value:null,children:new Map}}function Wt(n,e,t){if(F(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=M(e);n.children.has(i)||n.children.set(i,ii()),Wt(n.children.get(i),e=q(e),t)}}function Oi(n,e){if(F(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Z,(i,s)=>{Wt(n,new Y(i),s)}),Oi(n,e)}}if(n.children.size>0){const t=M(e);return e=q(e),n.children.has(t)&&Oi(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Li(n,e,t){null!==n.value?t(e,n.value):function Ur(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,s)=>{Li(s,new Y(e.toString()+"/"+i),t)})}class Ws{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ue(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}class it{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ws(e);const i=1e4+2e4*Math.random();D(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ue(e,(s,o)=>{o>0&&(0,h.r3)(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),D(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ne=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ne||{});function Fi(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class si{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(F(this.path)){if(null!=this.affectedTree.value)return(0,h.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Y(e));return new si(U(),t,this.revert)}}return(0,h.hu)(M(this.path)===e,"operationForChild called for unrelated child."),new si(q(this.path),this.affectedTree,this.revert)}}class kn{constructor(e,t){this.source=e,this.path=t,this.type=Ne.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new kn(this.source,U()):new kn(this.source,q(this.path))}}class Ut{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ne.OVERWRITE}operationForChild(e){return F(this.path)?new Ut(this.source,U(),this.snap.getImmediateChild(e)):new Ut(this.source,q(this.path),this.snap)}}class rn{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ne.MERGE}operationForChild(e){if(F(this.path)){const t=this.children.subtree(new Y(e));return t.isEmpty()?null:t.value?new Ut(this.source,U(),t.value):new rn(this.source,U(),t)}return(0,h.hu)(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rn(this.source,q(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class At{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;const t=M(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class ri{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function a(n,e,t,i,s,o){const l=i.filter(u=>u.type===t);l.sort((u,d)=>function f(n,e,t){if(null==e.childName||null==t.childName)throw(0,h.g5)("Should only compare child_ events.");const i=new B(e.childName,e.snapshotNode),s=new B(t.childName,t.snapshotNode);return n.index_.compare(i,s)}(n,u,d)),l.forEach(u=>{const d=function c(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,u,o);s.forEach(p=>{p.respondsTo(u.type)&&e.push(p.createEvent(d,n.query_))})})}function C(n,e){return{eventCache:n,serverCache:e}}function A(n,e,t,i){return C(new At(e,t,i),n.serverCache)}function K(n,e,t,i){return C(n.eventCache,new At(e,t,i))}function $(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Q(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kt;class te{constructor(e,t=(()=>(kt||(kt=new xe(fi)),kt))()){this.value=e,this.children=t}static fromObject(e){let t=new te(null);return ue(e,(i,s)=>{t=t.set(new Y(i),s)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:U(),value:this.value};if(F(e))return null;{const i=M(e),s=this.children.get(i);if(null!==s){const o=s.findRootMostMatchingPathAndValue(q(e),t);return null!=o?{path:ee(new Y(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{const t=M(e),i=this.children.get(t);return null!==i?i.subtree(q(e)):new te(null)}}set(e,t){if(F(e))return new te(t,this.children);{const i=M(e),o=(this.children.get(i)||new te(null)).set(q(e),t),l=this.children.insert(i,o);return new te(this.value,l)}}remove(e){if(F(e))return this.children.isEmpty()?new te(null):new te(null,this.children);{const t=M(e),i=this.children.get(t);if(i){const s=i.remove(q(e));let o;return o=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),null===this.value&&o.isEmpty()?new te(null):new te(this.value,o)}return this}}get(e){if(F(e))return this.value;{const t=M(e),i=this.children.get(t);return i?i.get(q(e)):null}}setTree(e,t){if(F(e))return t;{const i=M(e),o=(this.children.get(i)||new te(null)).setTree(q(e),t);let l;return l=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new te(this.value,l)}}fold(e){return this.fold_(U(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(ee(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,U(),t)}findOnPath_(e,t,i){const s=!!this.value&&i(t,this.value);if(s)return s;if(F(e))return null;{const o=M(e),l=this.children.get(o);return l?l.findOnPath_(q(e),ee(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,U(),t)}foreachOnPath_(e,t,i){if(F(e))return this;{this.value&&i(t,this.value);const s=M(e),o=this.children.get(s);return o?o.foreachOnPath_(q(e),ee(t,s),i):new te(null)}}foreach(e){this.foreach_(U(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(ee(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ht{constructor(e){this.writeTree_=e}static empty(){return new ht(new te(null))}}function Wi(n,e,t){if(F(e))return new ht(new te(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const s=i.path;let o=i.value;const l=Ie(s,e);return o=o.updateChild(l,t),new ht(n.writeTree_.set(s,o))}{const s=new te(t),o=n.writeTree_.setTree(e,s);return new ht(o)}}}function jr(n,e,t){let i=n;return ue(t,(s,o)=>{i=Wi(i,ee(e,s),o)}),i}function Io(n,e){if(F(e))return ht.empty();{const t=n.writeTree_.setTree(e,new te(null));return new ht(t)}}function Gr(n,e){return null!=xn(n,e)}function xn(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ie(t.path,e)):null}function To(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Z,(i,s)=>{e.push(new B(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{null!=s.value&&e.push(new B(i,s.value))}),e}function on(n,e){if(F(e))return n;{const t=xn(n,e);return new ht(null!=t?new te(t):n.writeTree_.subtree(e))}}function zr(n){return n.writeTree_.isEmpty()}function oi(n,e){return So(U(),n.writeTree_,e)}function So(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{".priority"===s?((0,h.hu)(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=So(ee(n,s),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(ee(n,".priority"),i)),t}}function Vs(n,e){return Ro(e,n)}function Ka(n,e){if(n.snap)return We(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&We(ee(n.path,t),e))return!0;return!1}function Qa(n){return n.visible}function Ao(n,e,t){let i=ht.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const l=o.path;let u;if(o.snap)We(t,l)?(u=Ie(t,l),i=Wi(i,u,o.snap)):We(l,t)&&(u=Ie(l,t),i=Wi(i,U(),o.snap.getChild(u)));else{if(!o.children)throw(0,h.g5)("WriteRecord should have .snap or .children");if(We(t,l))u=Ie(t,l),i=jr(i,u,o.children);else if(We(l,t))if(u=Ie(l,t),F(u))i=jr(i,U(),o.children);else{const d=(0,h.DV)(o.children,M(u));if(d){const p=d.getChild(q(u));i=Wi(i,U(),p)}}}}}return i}function ko(n,e,t,i,s){if(i||s){const o=on(n.visibleWrites,e);return!s&&zr(o)?t:s||null!=t||Gr(o,U())?oi(Ao(n.allWrites,function(p){return(p.visible||s)&&(!i||!~i.indexOf(p.writeId))&&(We(p.path,e)||We(e,p.path))},e),t||N.EMPTY_NODE):null}{const o=xn(n.visibleWrites,e);if(null!=o)return o;{const l=on(n.visibleWrites,e);return zr(l)?t:null!=t||Gr(l,U())?oi(l,t||N.EMPTY_NODE):null}}}function Hs(n,e,t,i){return ko(n.writeTree,n.treePath,e,t,i)}function Kr(n,e){return function $a(n,e,t){let i=N.EMPTY_NODE;const s=xn(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Z,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(t){const o=on(n.visibleWrites,e);return t.forEachChild(Z,(l,u)=>{const d=oi(on(o,new Y(l)),u);i=i.updateImmediateChild(l,d)}),To(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}return To(on(n.visibleWrites,e)).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}(n.writeTree,n.treePath,e)}function xo(n,e,t,i){return function qa(n,e,t,i,s){(0,h.hu)(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=ee(e,t);if(Gr(n.visibleWrites,o))return null;{const l=on(n.visibleWrites,o);return zr(l)?s.getChild(t):oi(l,s.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function js(n,e){return function Xa(n,e){return xn(n.visibleWrites,e)}(n.writeTree,ee(n.treePath,e))}function Yr(n,e,t){return function Za(n,e,t,i){const s=ee(e,t),o=xn(n.visibleWrites,s);return null!=o?o:i.isCompleteForChild(t)?oi(on(n.visibleWrites,s),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function Po(n,e){return Ro(ee(n.treePath,e),n.writeTree)}function Ro(n,e){return{treePath:n,writeTree:e}}class nl{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,h.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,h.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,sn(i,e.snapshotNode,s.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,Sn(i,s.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,nn(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,h.g5)("Illegal combination of changes: "+e+" occurred after "+s);this.changeMap.set(i,sn(i,e.snapshotNode,s.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const No=new class il{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class Qr{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new At(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Yr(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Q(this.viewCache_),o=function tl(n,e,t,i,s,o){return function Ja(n,e,t,i,s,o,l){let u;const d=on(n.visibleWrites,e),p=xn(d,U());if(null!=p)u=p;else{if(null==t)return[];u=oi(d,t)}if(u=u.withIndex(l),u.isEmpty()||u.isLeafNode())return[];{const _=[],b=l.getCompare(),E=o?u.getReverseIteratorFrom(i,l):u.getIteratorFrom(i,l);let S=E.getNext();for(;S&&_.length<s;)0!==b(S,i)&&_.push(S),S=E.getNext();return _}}(n.writeTree,n.treePath,e,t,i,s,o)}(this.writes_,s,t,1,i,e);return 0===o.length?null:o[0]}}function Do(n,e,t,i,s,o){const l=e.eventCache;if(null!=js(i,t))return e;{let u,d;if(F(t))if((0,h.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=Q(e),b=Kr(i,p instanceof N?p:N.EMPTY_NODE);u=n.filter.updateFullNode(e.eventCache.getNode(),b,o)}else{const p=Hs(i,Q(e));u=n.filter.updateFullNode(e.eventCache.getNode(),p,o)}else{const p=M(t);if(".priority"===p){(0,h.hu)(1===Tt(t),"Can't have a priority with additional path components");const _=l.getNode();d=e.serverCache.getNode();const b=xo(i,t,_,d);u=null!=b?n.filter.updatePriority(_,b):l.getNode()}else{const _=q(t);let b;if(l.isCompleteForChild(p)){d=e.serverCache.getNode();const E=xo(i,t,l.getNode(),d);b=null!=E?l.getNode().getImmediateChild(p).updateChild(_,E):l.getNode().getImmediateChild(p)}else b=Yr(i,p,e.serverCache);u=null!=b?n.filter.updateChild(l.getNode(),p,b,_,s,o):l.getNode()}}return A(e,u,l.isFullyInitialized()||F(t),n.filter.filtersNodes())}}function Gs(n,e,t,i,s,o,l,u){const d=e.serverCache;let p;const _=l?n.filter:n.filter.getIndexedFilter();if(F(t))p=_.updateFullNode(d.getNode(),i,null);else if(_.filtersNodes()&&!d.isFiltered()){const S=d.getNode().updateChild(t,i);p=_.updateFullNode(d.getNode(),S,null)}else{const S=M(t);if(!d.isCompleteForPath(t)&&Tt(t)>1)return e;const k=q(t),se=d.getNode().getImmediateChild(S).updateChild(k,i);p=".priority"===S?_.updatePriority(d.getNode(),se):_.updateChild(d.getNode(),S,se,k,No,null)}const b=K(e,p,d.isFullyInitialized()||F(t),_.filtersNodes());return Do(n,b,t,s,new Qr(s,b,o),u)}function $r(n,e,t,i,s,o,l){const u=e.eventCache;let d,p;const _=new Qr(s,e,o);if(F(t))p=n.filter.updateFullNode(e.eventCache.getNode(),i,l),d=A(e,p,!0,n.filter.filtersNodes());else{const b=M(t);if(".priority"===b)p=n.filter.updatePriority(e.eventCache.getNode(),i),d=A(e,p,u.isFullyInitialized(),u.isFiltered());else{const E=q(t),S=u.getNode().getImmediateChild(b);let k;if(F(E))k=i;else{const V=_.getCompleteChild(b);k=null!=V?".priority"===Ei(E)&&V.getChild(bs(E)).isEmpty()?V:V.updateChild(E,i):N.EMPTY_NODE}d=S.equals(k)?e:A(e,n.filter.updateChild(u.getNode(),b,k,E,_,l),u.isFullyInitialized(),n.filter.filtersNodes())}}return d}function Oo(n,e){return n.eventCache.isCompleteForChild(e)}function Lo(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function qr(n,e,t,i,s,o,l,u){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p,d=e;p=F(t)?i:new te(null).setTree(t,i);const _=e.serverCache.getNode();return p.children.inorderTraversal((b,E)=>{if(_.hasChild(b)){const k=Lo(0,e.serverCache.getNode().getImmediateChild(b),E);d=Gs(n,d,new Y(b),k,s,o,l,u)}}),p.children.inorderTraversal((b,E)=>{const S=!e.serverCache.isCompleteForChild(b)&&null===E.value;if(!_.hasChild(b)&&!S){const V=Lo(0,e.serverCache.getNode().getImmediateChild(b),E);d=Gs(n,d,new Y(b),V,s,o,l,u)}}),d}class hl{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Ri(i.getIndex()),o=function Ls(n){return n.loadsAllData()?new Ri(n.getIndex()):n.hasLimit()?new Lr(n):new An(n)}(i);this.processor_=function sl(n){return{filter:n}}(o);const l=t.serverCache,u=t.eventCache,d=s.updateFullNode(N.EMPTY_NODE,l.getNode(),null),p=o.updateFullNode(N.EMPTY_NODE,u.getNode(),null),_=new At(d,l.isFullyInitialized(),s.filtersNodes()),b=new At(p,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=C(b,_),this.eventGenerator_=new ri(this.query_)}get query(){return this.query_}}function gl(n,e){const t=Q(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!F(e)&&!t.getImmediateChild(M(e)).isEmpty())?t.getChild(e):null}function Mo(n){return 0===n.eventRegistrations_.length}function Fo(n,e,t){const i=[];if(t){(0,h.hu)(null==e,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,s);l&&i.push(l)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(l.matches(e)){if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}else s.push(l)}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Bo(n,e,t,i){e.type===Ne.MERGE&&null!==e.source.queryId&&((0,h.hu)(Q(n.viewCache_),"We should always have a full cache before handling merges"),(0,h.hu)($(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=function ol(n,e,t,i,s){const o=new nl;let l,u;if(t.type===Ne.OVERWRITE){const p=t;p.source.fromUser?l=$r(n,e,p.path,p.snap,i,s,o):((0,h.hu)(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered()&&!F(p.path),l=Gs(n,e,p.path,p.snap,i,s,u,o))}else if(t.type===Ne.MERGE){const p=t;p.source.fromUser?l=function ll(n,e,t,i,s,o,l){let u=e;return i.foreach((d,p)=>{const _=ee(t,d);Oo(e,M(_))&&(u=$r(n,u,_,p,s,o,l))}),i.foreach((d,p)=>{const _=ee(t,d);Oo(e,M(_))||(u=$r(n,u,_,p,s,o,l))}),u}(n,e,p.path,p.children,i,s,o):((0,h.hu)(p.source.fromServer,"Unknown source."),u=p.source.tagged||e.serverCache.isFiltered(),l=qr(n,e,p.path,p.children,i,s,u,o))}else if(t.type===Ne.ACK_USER_WRITE){const p=t;l=p.revert?function dl(n,e,t,i,s,o){let l;if(null!=js(i,t))return e;{const u=new Qr(i,e,s),d=e.eventCache.getNode();let p;if(F(t)||".priority"===M(t)){let _;if(e.serverCache.isFullyInitialized())_=Hs(i,Q(e));else{const b=e.serverCache.getNode();(0,h.hu)(b instanceof N,"serverChildren would be complete if leaf node"),_=Kr(i,b)}p=n.filter.updateFullNode(d,_,o)}else{const _=M(t);let b=Yr(i,_,e.serverCache);null==b&&e.serverCache.isCompleteForChild(_)&&(b=d.getImmediateChild(_)),p=null!=b?n.filter.updateChild(d,_,b,q(t),u,o):e.eventCache.getNode().hasChild(_)?n.filter.updateChild(d,_,N.EMPTY_NODE,q(t),u,o):d,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Hs(i,Q(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,o)))}return l=e.serverCache.isFullyInitialized()||null!=js(i,U()),A(e,p,l,n.filter.filtersNodes())}}(n,e,p.path,i,s,o):function cl(n,e,t,i,s,o,l){if(null!=js(s,t))return e;const u=e.serverCache.isFiltered(),d=e.serverCache;if(null!=i.value){if(F(t)&&d.isFullyInitialized()||d.isCompleteForPath(t))return Gs(n,e,t,d.getNode().getChild(t),s,o,u,l);if(F(t)){let p=new te(null);return d.getNode().forEachChild(Ke,(_,b)=>{p=p.set(new Y(_),b)}),qr(n,e,t,p,s,o,u,l)}return e}{let p=new te(null);return i.foreach((_,b)=>{const E=ee(t,_);d.isCompleteForPath(E)&&(p=p.set(_,d.getNode().getChild(E)))}),qr(n,e,t,p,s,o,u,l)}}(n,e,p.path,p.affectedTree,i,s,o)}else{if(t.type!==Ne.LISTEN_COMPLETE)throw(0,h.g5)("Unknown operation type: "+t.type);l=function ul(n,e,t,i,s){const o=e.serverCache;return Do(n,K(e,o.getNode(),o.isFullyInitialized()||F(t),o.isFiltered()),t,i,No,s)}(n,e,t.path,i,o)}const d=o.getChanges();return function al(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=$(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(Os($(e)))}}(e,l,d),{viewCache:l,changes:d}}(n.processor_,s,e,t,i);return function rl(n,e){(0,h.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,h.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,h.hu)(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Wo(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Wo(n,e,t,i){return function r(n,e,t,i){const s=[],o=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(function Pi(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),a(n,s,"child_removed",e,i,t),a(n,s,"child_added",e,i,t),a(n,s,"child_moved",o,i,t),a(n,s,"child_changed",e,i,t),a(n,s,"value",e,i,t),s}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let zs,Ys;class Uo{constructor(){this.views=new Map}}function Zr(n,e,t,i){const s=e.source.queryId;if(null!==s){const o=n.views.get(s);return(0,h.hu)(null!=o,"SyncTree gave us an op for an invalid query."),Bo(o,e,t,i)}{let o=[];for(const l of n.views.values())o=o.concat(Bo(l,e,t,i));return o}}function Vo(n,e,t,i,s){const l=n.views.get(e._queryIdentifier);if(!l){let u=Hs(t,s?i:null),d=!1;u?d=!0:i instanceof N?(u=Kr(t,i),d=!1):(u=N.EMPTY_NODE,d=!1);const p=C(new At(u,d,!1),new At(i,s,!1));return new hl(e,p)}return l}function Ho(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function an(n,e){let t=null;for(const i of n.views.values())t=t||gl(i,e);return t}function jo(n,e){return e._queryParams.loadsAllData()?Ks(n):n.views.get(e._queryIdentifier)}function Go(n,e){return null!=jo(n,e)}function ln(n){return null!=Ks(n)}function Ks(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Tl=1;class zo{constructor(e){this.listenProvider_=e,this.syncPointTree_=new te(null),this.pendingWriteTree_=function el(){return{visibleWrites:ht.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xr(n,e,t,i,s){return function Ha(n,e,t,i,s){(0,h.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Wi(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,s),s?ai(n,new Ut({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function cn(n,e,t=!1){const i=function Ga(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function za(n,e){const t=n.allWrites.findIndex(u=>u.writeId===e);(0,h.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const u=n.allWrites[l];u.visible&&(l>=t&&Ka(u,i.path)?s=!1:We(i.path,u.path)&&(o=!0)),l--}return!!s&&(o?(function Ya(n){n.visibleWrites=Ao(n.allWrites,Qa,U()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=Io(n.visibleWrites,i.path):ue(i.children,d=>{n.visibleWrites=Io(n.visibleWrites,ee(i.path,d))}),!0))}(n.pendingWriteTree_,e)){let o=new te(null);return null!=i.snap?o=o.set(U(),!0):ue(i.children,l=>{o=o.set(new Y(l),!0)}),ai(n,new si(i.path,o,t))}return[]}function Ui(n,e,t){return ai(n,new Ut({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Qs(n,e,t,i,s=!1){const o=e._path,l=n.syncPointTree_.get(o);let u=[];if(l&&("default"===e._queryIdentifier||Go(l,e))){const d=function Cl(n,e,t,i){const s=e._queryIdentifier,o=[];let l=[];const u=ln(n);if("default"===s)for(const[d,p]of n.views.entries())l=l.concat(Fo(p,t,i)),Mo(p)&&(n.views.delete(d),p.query._queryParams.loadsAllData()||o.push(p.query));else{const d=n.views.get(s);d&&(l=l.concat(Fo(d,t,i)),Mo(d)&&(n.views.delete(s),d.query._queryParams.loadsAllData()||o.push(d.query)))}return u&&!ln(n)&&o.push(new(function yl(){return(0,h.hu)(zs,"Reference.ts has not been loaded"),zs}())(e._repo,e._path)),{removed:o,events:l}}(l,e,t,i);(function vl(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const p=d.removed;if(u=d.events,!s){const _=-1!==p.findIndex(E=>E._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(o,(E,S)=>ln(S));if(_&&!b){const E=n.syncPointTree_.subtree(o);if(!E.isEmpty()){const S=function Nl(n){return n.fold((e,t,i)=>{if(t&&ln(t))return[Ks(t)];{let s=[];return t&&(s=Ho(t)),ue(i,(o,l)=>{s=s.concat(l)}),s}})}(E);for(let k=0;k<S.length;++k){const V=S[k],se=V.query,De=$o(n,V);n.listenProvider_.startListening(Hi(se),Vi(n,se),De.hashFn,De.onComplete)}}}!b&&p.length>0&&!i&&(_?n.listenProvider_.stopListening(Hi(e),null):p.forEach(E=>{const S=n.queryToTagMap.get(qs(E));n.listenProvider_.stopListening(Hi(E),S)}))}!function Dl(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=qs(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}(n,p)}return u}function Ko(n,e,t,i){const s=eo(n,i);if(null!=s){const o=to(s),l=o.path,u=o.queryId,d=Ie(l,e);return no(n,l,new Ut(Fi(u),d,t))}return[]}function Jr(n,e,t,i=!1){const s=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(s,(E,S)=>{const k=Ie(E,s);o=o||an(S,k),l=l||ln(S)});let d,u=n.syncPointTree_.get(s);u?(l=l||ln(u),o=o||an(u,U())):(u=new Uo,n.syncPointTree_=n.syncPointTree_.set(s,u)),null!=o?d=!0:(d=!1,o=N.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((S,k)=>{const V=an(k,U());V&&(o=o.updateImmediateChild(S,V))}));const p=Go(u,e);if(!p&&!e._queryParams.loadsAllData()){const E=qs(e);(0,h.hu)(!n.queryToTagMap.has(E),"View does not exist, but we have a tag");const S=function Ol(){return Tl++}();n.queryToTagMap.set(E,S),n.tagToQueryMap.set(S,E)}let b=function bl(n,e,t,i,s,o){const l=Vo(n,e,i,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function ml(n,e){n.eventRegistrations_.push(e)}(l,t),function _l(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Z,(o,l)=>{i.push(nn(o,l))}),t.isFullyInitialized()&&i.push(Os(t.getNode())),Wo(n,i,t.getNode(),e)}(l,t)}(u,e,t,Vs(n.pendingWriteTree_,s),o,d);if(!p&&!l&&!i){const E=jo(u,e);b=b.concat(function Ll(n,e,t){const i=e._path,s=Vi(n,e),o=$o(n,t),l=n.listenProvider_.startListening(Hi(e),s,o.hashFn,o.onComplete),u=n.syncPointTree_.subtree(i);if(s)(0,h.hu)(!ln(u.value),"If we're adding a query, it shouldn't be shadowed");else{const d=u.fold((p,_,b)=>{if(!F(p)&&_&&ln(_))return[Ks(_).query];{let E=[];return _&&(E=E.concat(Ho(_).map(S=>S.query))),ue(b,(S,k)=>{E=E.concat(k)}),E}});for(let p=0;p<d.length;++p){const _=d[p];n.listenProvider_.stopListening(Hi(_),Vi(n,_))}}return l}(n,e,E))}return b}function $s(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,u)=>{const p=an(u,Ie(l,e));if(p)return p});return ko(s,e,o,t,!0)}function ai(n,e){return Yo(e,n.syncPointTree_,null,Vs(n.pendingWriteTree_,U()))}function Yo(n,e,t,i){if(F(n.path))return Qo(n,e,t,i);{const s=e.get(U());null==t&&null!=s&&(t=an(s,U()));let o=[];const l=M(n.path),u=n.operationForChild(l),d=e.children.get(l);if(d&&u){const p=t?t.getImmediateChild(l):null,_=Po(i,l);o=o.concat(Yo(u,d,p,_))}return s&&(o=o.concat(Zr(s,n,i,t))),o}}function Qo(n,e,t,i){const s=e.get(U());null==t&&null!=s&&(t=an(s,U()));let o=[];return e.children.inorderTraversal((l,u)=>{const d=t?t.getImmediateChild(l):null,p=Po(i,l),_=n.operationForChild(l);_&&(o=o.concat(Qo(_,u,d,p)))}),s&&(o=o.concat(Zr(s,n,i,t))),o}function $o(n,e){const t=e.query,i=Vi(n,t);return{hashFn:()=>(function fl(n){return n.viewCache_.serverCache.getNode()}(e)||N.EMPTY_NODE).hash(),onComplete:s=>{if("ok"===s)return i?function xl(n,e,t){const i=eo(n,t);if(i){const s=to(i),o=s.path,l=s.queryId,u=Ie(o,e);return no(n,o,new kn(Fi(l),u))}return[]}(n,t._path,i):function kl(n,e){return ai(n,new kn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function g(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(s,t);return Qs(n,t,null,o)}}}}function Vi(n,e){const t=qs(e);return n.queryToTagMap.get(t)}function qs(n){return n._path.toString()+"$"+n._queryIdentifier}function eo(n,e){return n.tagToQueryMap.get(e)}function to(n){const e=n.indexOf("$");return(0,h.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Y(n.substr(0,e))}}function no(n,e,t){const i=n.syncPointTree_.get(e);return(0,h.hu)(i,"Missing sync point for query tag that we're tracking"),Zr(i,t,Vs(n.pendingWriteTree_,e),null)}function Hi(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Il(){return(0,h.hu)(Ys,"Reference.ts has not been loaded"),Ys}())(n._repo,n._path):n}class io{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new io(t)}node(){return this.node_}}class so{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ee(this.path_,e);return new so(this.syncTree_,t)}node(){return $s(this.syncTree_,this.path_)}}const Ml=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},qo=function(n,e,t){return n&&"object"==typeof n?((0,h.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Fl(n[".sv"],e,t):"object"==typeof n[".sv"]?Bl(n[".sv"],e):void(0,h.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Fl=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,h.hu)(!1,"Unexpected server value: "+n)},Bl=function(n,e,t){n.hasOwnProperty("increment")||(0,h.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,h.hu)(!1,"Unexpected increment value: "+i);const s=e.node();if((0,h.hu)(null!==s&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const l=s.getValue();return"number"!=typeof l?i:l+i},Zo=function(n,e,t,i){return oo(e,new so(t,n),i)},ro=function(n,e,t){return oo(n,new io(e),t)};function oo(n,e,t){const i=n.getPriority().val(),s=qo(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,u=qo(l.getValue(),e,t);return u!==l.getValue()||s!==l.getPriority().val()?new Bt(u,ne(s)):n}{const l=n;return o=l,s!==l.getPriority().val()&&(o=o.updatePriority(new Bt(s))),l.forEachChild(Z,(u,d)=>{const p=oo(d,e.getImmediateChild(u),t);p!==d&&(o=o.updateImmediateChild(u,p))}),o}}class ao{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Zs(n,e){let t=e instanceof Y?e:new Y(e),i=n,s=M(t);for(;null!==s;){const o=(0,h.DV)(i.node.children,s)||{children:{},childCount:0};i=new ao(s,i,o),t=q(t),s=M(t)}return i}function Pn(n){return n.node.value}function lo(n,e){n.node.value=e,co(n)}function Xo(n){return n.node.childCount>0}function Xs(n,e){ue(n.node.children,(t,i)=>{e(new ao(t,n,i))})}function Jo(n,e,t,i){t&&!i&&e(n),Xs(n,s=>{Jo(s,e,!0,i)}),t&&i&&e(n)}function ji(n){return new Y(null===n.parent?n.name:ji(n.parent)+"/"+n.name)}function co(n){null!==n.parent&&function Vl(n,e,t){const i=function Wl(n){return void 0===Pn(n)&&!Xo(n)}(t),s=(0,h.r3)(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,co(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,co(n))}(n.parent,n.name,n)}const Hl=/[\[\].#$\/\u0000-\u001F\u007F]/,jl=/[\[\].#$\u0000-\u001F\u007F]/,uo=10485760,Js=function(n){return"string"==typeof n&&0!==n.length&&!Hl.test(n)},ea=function(n){return"string"==typeof n&&0!==n.length&&!jl.test(n)},Gi=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Yt(n)||n&&"object"==typeof n&&(0,h.r3)(n,".sv")},xt=function(n,e,t,i){i&&void 0===e||zi((0,h.gK)(n,"value"),e,t)},zi=function(n,e,t){const i=t instanceof Y?new Sr(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ct(i));if("function"==typeof e)throw new Error(n+"contains a function "+ct(i)+" with contents = "+e.toString());if(Yt(e))throw new Error(n+"contains "+e.toString()+" "+ct(i));if("string"==typeof e&&e.length>uo/3&&(0,h.ug)(e)>uo)throw new Error(n+"contains a string greater than "+uo+" utf8 bytes "+ct(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,o=!1;if(ue(e,(l,u)=>{if(".value"===l)s=!0;else if(".priority"!==l&&".sv"!==l&&(o=!0,!Js(l)))throw new Error(n+" contains an invalid key ("+l+") "+ct(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ar(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,h.ug)(e),Es(n)})(i,l),zi(n,u,i),function Cs(n){const e=n.parts_.pop();n.byteLength_-=(0,h.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),s&&o)throw new Error(n+' contains ".value" child '+ct(i)+" in addition to actual children.")}},ta=function(n,e,t,i){if(i&&void 0===e)return;const s=(0,h.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const o=[];ue(e,(l,u)=>{const d=new Y(l);if(zi(s,u,ee(t,d)),".priority"===Ei(d)&&!Gi(u))throw new Error(s+"contains an invalid value for '"+d.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(d)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=vn(i);for(let l=0;l<o.length;l++)if((".priority"!==o[l]||l!==o.length-1)&&!Js(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Qn);let s=null;for(t=0;t<e.length;t++){if(i=e[t],null!==s&&We(s,i))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}}(s,o)},ho=function(n,e,t){if(!t||void 0!==e){if(Yt(e))throw new Error((0,h.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gi(e))throw new Error((0,h.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ki=function(n,e,t,i){if(!(i&&void 0===t||Js(t)))throw new Error((0,h.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Yi=function(n,e,t,i){if(!(i&&void 0===t||ea(t)))throw new Error((0,h.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Kl=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Yi(n,e,t,i)},st=function(n,e){if(".info"===M(e))throw new Error(n+" failed = Can't modify data under /.info/")},na=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Js(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ea(n)}(t))throw new Error((0,h.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Yl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function er(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();null!==t&&!$n(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function ia(n,e,t){er(n,t),sa(n,i=>$n(i,e))}function Qe(n,e,t){er(n,t),sa(n,i=>We(i,e)||We(e,i))}function sa(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];s&&(e(s.path)?(Ql(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Ql(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();he&&re("event: "+t.toString()),G(i)}}}const ra="repo_interrupt",$l=25;class ql{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ii(),this.transactionQueueTree_=new ao,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oa(n){const t=n.infoData_.getNode(new Y(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qi(n){return Ml({timestamp:oa(n)})}function aa(n,e,t,i,s){n.dataUpdateCount++;const o=new Y(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(i){const d=(0,h.UI)(t,p=>ne(p));l=function Pl(n,e,t,i){const s=eo(n,i);if(s){const o=to(s),l=o.path,u=o.queryId,d=Ie(l,e),p=te.fromObject(t);return no(n,l,new rn(Fi(u),d,p))}return[]}(n.serverSyncTree_,o,d,s)}else{const d=ne(t);l=Ko(n.serverSyncTree_,o,d,s)}else if(i){const d=(0,h.UI)(t,p=>ne(p));l=function Al(n,e,t){const i=te.fromObject(t);return ai(n,new rn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,d)}else{const d=ne(t);l=Ui(n.serverSyncTree_,o,d)}let u=o;l.length>0&&(u=ci(n,o)),Qe(n.eventQueue_,u,l)}function la(n,e){fo(n,"connected",e),!1===e&&function tc(n){li(n,"onDisconnectEvents");const e=Qi(n),t=ii();Li(n.onDisconnect_,U(),(s,o)=>{const l=Zo(s,o,n.serverSyncTree_,e);Wt(t,s,l)});let i=[];Li(t,U(),(s,o)=>{i=i.concat(Ui(n.serverSyncTree_,s,o));const l=_o(n,s);ci(n,l)}),n.onDisconnect_=ii(),Qe(n.eventQueue_,U(),i)}(n)}function fo(n,e,t){const i=new Y("/.info/"+e),s=ne(t);n.infoData_.updateSnapshot(i,s);const o=Ui(n.infoSyncTree_,i,s);Qe(n.eventQueue_,i,o)}function tr(n){return n.nextWriteId_++}function po(n,e,t,i,s){li(n,"set",{path:e.toString(),value:t,priority:i});const o=Qi(n),l=ne(t,i),u=$s(n.serverSyncTree_,e),d=ro(l,u,o),p=tr(n),_=Xr(n.serverSyncTree_,e,d,p,!0);er(n.eventQueue_,_),n.server_.put(e.toString(),l.val(!0),(E,S)=>{const k="ok"===E;k||oe("set at "+e+" failed: "+E);const V=cn(n.serverSyncTree_,p,!k);Qe(n.eventQueue_,e,V),un(0,s,E,S)});const b=_o(n,e);ci(n,b),Qe(n.eventQueue_,b,[])}function nc(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,s)=>{"ok"===i&&Oi(n.onDisconnect_,e),un(0,t,i,s)})}function ca(n,e,t,i){const s=ne(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,l)=>{"ok"===o&&Wt(n.onDisconnect_,e,s),un(0,i,o,l)})}function go(n,e,t){let i;i=".info"===M(e._path)?Qs(n.infoSyncTree_,e,t):Qs(n.serverSyncTree_,e,t),ia(n.eventQueue_,e._path,i)}function ua(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ra)}function li(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),re(t,...e)}function un(n,e,t,i){e&&G(()=>{if("ok"===t)e(null);else{const s=(t||"error").toUpperCase();let o=s;i&&(o+=": "+i);const l=new Error(o);l.code=s,e(l)}})}function mo(n,e,t){return $s(n.serverSyncTree_,e,t)||N.EMPTY_NODE}function nr(n,e=n.transactionQueueTree_){if(e||ir(n,e),Pn(e)){const t=ha(n,e);(0,h.hu)(t.length>0,"Sending zero length transaction queue"),t.every(s=>0===s.status)&&function lc(n,e,t){const i=t.map(p=>p.currentWriteId),s=mo(n,e,i);let o=s;const l=s.hash();for(let p=0;p<t.length;p++){const _=t[p];(0,h.hu)(0===_.status,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const b=Ie(e,_.path);o=o.updateChild(b,_.currentOutputSnapshotRaw)}const u=o.val(!0),d=e;n.server_.put(d.toString(),u,p=>{li(n,"transaction put response",{path:d.toString(),status:p});let _=[];if("ok"===p){const b=[];for(let E=0;E<t.length;E++)t[E].status=2,_=_.concat(cn(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&b.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();ir(n,Zs(n.transactionQueueTree_,e)),nr(n,n.transactionQueueTree_),Qe(n.eventQueue_,e,_);for(let E=0;E<b.length;E++)G(b[E])}else{if("datastale"===p)for(let b=0;b<t.length;b++)t[b].status=3===t[b].status?4:0;else{oe("transaction at "+d.toString()+" failed: "+p);for(let b=0;b<t.length;b++)t[b].status=4,t[b].abortReason=p}ci(n,e)}},l)}(n,ji(e),t)}else Xo(e)&&Xs(e,t=>{nr(n,t)})}function ci(n,e){const t=da(n,e),i=ji(t);return function cc(n,e,t){if(0===e.length)return;const i=[];let s=[];const l=e.filter(u=>0===u.status).map(u=>u.currentWriteId);for(let u=0;u<e.length;u++){const d=e[u],p=Ie(t,d.path);let b,_=!1;if((0,h.hu)(null!==p,"rerunTransactionsUnderNode_: relativePath should not be null."),4===d.status)_=!0,b=d.abortReason,s=s.concat(cn(n.serverSyncTree_,d.currentWriteId,!0));else if(0===d.status)if(d.retryCount>=$l)_=!0,b="maxretry",s=s.concat(cn(n.serverSyncTree_,d.currentWriteId,!0));else{const E=mo(n,d.path,l);d.currentInputSnapshot=E;const S=e[u].update(E.val());if(void 0!==S){zi("transaction failed: Data returned ",S,d.path);let k=ne(S);"object"==typeof S&&null!=S&&(0,h.r3)(S,".priority")||(k=k.updatePriority(E.getPriority()));const se=d.currentWriteId,De=Qi(n),qe=ro(k,E,De);d.currentOutputSnapshotRaw=k,d.currentOutputSnapshotResolved=qe,d.currentWriteId=tr(n),l.splice(l.indexOf(se),1),s=s.concat(Xr(n.serverSyncTree_,d.path,qe,d.currentWriteId,d.applyLocally)),s=s.concat(cn(n.serverSyncTree_,se,!0))}else _=!0,b="nodata",s=s.concat(cn(n.serverSyncTree_,d.currentWriteId,!0))}Qe(n.eventQueue_,t,s),s=[],_&&(e[u].status=2,setTimeout(e[u].unwatcher,Math.floor(0)),e[u].onComplete&&i.push("nodata"===b?()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot):()=>e[u].onComplete(new Error(b),!1,null)))}ir(n,n.transactionQueueTree_);for(let u=0;u<i.length;u++)G(i[u]);nr(n,n.transactionQueueTree_)}(n,ha(n,t),i),i}function da(n,e){let t,i=n.transactionQueueTree_;for(t=M(e);null!==t&&void 0===Pn(i);)i=Zs(i,t),t=M(e=q(e));return i}function ha(n,e){const t=[];return fa(n,e,t),t.sort((i,s)=>i.order-s.order),t}function fa(n,e,t){const i=Pn(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);Xs(e,s=>{fa(n,s,t)})}function ir(n,e){const t=Pn(e);if(t){let i=0;for(let s=0;s<t.length;s++)2!==t[s].status&&(t[i]=t[s],i++);t.length=i,lo(e,t.length>0?t:void 0)}Xs(e,i=>{ir(n,i)})}function _o(n,e){const t=ji(da(n,e)),i=Zs(n.transactionQueueTree_,e);return function Ul(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,s=>{wo(n,s)}),wo(n,i),Jo(i,s=>{wo(n,s)}),t}function wo(n,e){const t=Pn(e);if(t){const i=[];let s=[],o=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,h.hu)(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):((0,h.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(cn(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===o?lo(e,void 0):t.length=o+1,Qe(n.eventQueue_,ji(e),s);for(let l=0;l<i.length;l++)G(i[l])}}const yo=function(n,e){const t=hc(n),i=t.namespace;return"firebase.com"===t.domain&&X(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&X("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&oe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jn(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Y(t.pathString)}},hc=function(n){let e="",t="",i="",s="",o="",l=!0,u="https",d=443;if("string"==typeof n){let p=n.indexOf("//");p>=0&&(u=n.substring(0,p-1),n=n.substring(p+2));let _=n.indexOf("/");-1===_&&(_=n.length);let b=n.indexOf("?");-1===b&&(b=n.length),e=n.substring(0,Math.min(_,b)),_<b&&(s=function uc(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}(n.substring(_,b)));const E=function dc(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):oe(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,b)));p=e.indexOf(":"),p>=0?(l="https"===u||"wss"===u,d=parseInt(e.substring(p+1),10)):p=e.length;const S=e.slice(0,p);if("localhost"===S.toLowerCase())t="localhost";else if(S.split(".").length<=2)t=S;else{const k=e.indexOf(".");i=e.substring(0,k).toLowerCase(),t=e.substring(k+1),o=i}"ns"in E&&(o=E.ns)}return{host:e,port:d,domain:t,subdomain:i,secure:l,scheme:u,pathString:s,namespace:o}},pa="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fc=function(){let n=0;const e=[];return function(t){const i=t===n;let s;n=t;const o=new Array(8);for(s=7;s>=0;s--)o[s]=pa.charAt(t%64),t=Math.floor(t/64);(0,h.hu)(0===t,"Cannot push at time == 0");let l=o.join("");if(i){for(s=11;s>=0&&63===e[s];s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(64*Math.random());for(s=0;s<12;s++)l+=pa.charAt(e[s]);return(0,h.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class ga{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,h.Wl)(this.snapshot.exportVal())}}class ma{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vo{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,h.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class _a{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new h.BH;return nc(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){st("OnDisconnect.remove",this._path);const e=new h.BH;return ca(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){st("OnDisconnect.set",this._path),xt("OnDisconnect.set",e,this._path,!1);const t=new h.BH;return ca(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){st("OnDisconnect.setWithPriority",this._path),xt("OnDisconnect.setWithPriority",e,this._path,!1),ho("OnDisconnect.setWithPriority",t,!1);const i=new h.BH;return function ic(n,e,t,i,s){const o=ne(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,u)=>{"ok"===l&&Wt(n.onDisconnect_,e,o),un(0,s,l,u)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){st("OnDisconnect.update",this._path),ta("OnDisconnect.update",e,this._path,!1);const t=new h.BH;return function sc(n,e,t,i){if((0,h.xb)(t))return re("onDisconnect().update() called with empty data.  Don't do anything."),void un(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(s,o)=>{"ok"===s&&ue(t,(l,u)=>{const d=ne(u);Wt(n.onDisconnect_,ee(e,l),d)}),un(0,i,s,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Ue{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return F(this._path)?null:Ei(this._path)}get ref(){return new rt(this._repo,this._path)}get _queryIdentifier(){const e=Fs(this._queryParams),t=Mt(e);return"{}"===t?"default":t}get _queryObject(){return Fs(this._queryParams)}isEqual(e){if(!((e=(0,h.m9)(e))instanceof Ue))return!1;const t=this._repo===e._repo,i=$n(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Tr(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function sr(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function dn(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ke){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ae)throw new Error(i);if("string"!=typeof e)throw new Error(s)}if(n.hasEnd()){if(n.getIndexEndName()!==Fe)throw new Error(i);if("string"!=typeof t)throw new Error(s)}}else if(n.getIndex()===Z){if(null!=e&&!Gi(e)||null!=t&&!Gi(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,h.hu)(n.getIndex()instanceof xi||n.getIndex()===ei,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function rr(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class rt extends Ue{constructor(e,t){super(e,t,new ti,!1)}get parent(){const e=bs(this._path);return null===e?null:new rt(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Rn{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Y(e),i=Nn(this.ref,e);return new Rn(this._node.getChild(t),i,Z)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,s)=>e(new Rn(s,Nn(this.ref,i),Z)))}hasChild(e){const t=new Y(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wa(n,e){return(n=(0,h.m9)(n))._checkNotDeleted("ref"),void 0!==e?Nn(n._root,e):n._root}function ya(n,e){(n=(0,h.m9)(n))._checkNotDeleted("refFromURL");const t=yo(e,n._repo.repoInfo_.nodeAdmin);na("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&X("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),wa(n,t.path.toString())}function Nn(n,e){return null===M((n=(0,h.m9)(n))._path)?Kl("child","path",e,!1):Yi("child","path",e,!1),new rt(n._repo,ee(n._path,e))}function bo(n,e){n=(0,h.m9)(n),st("set",n._path),xt("set",e,n._path,!1);const t=new h.BH;return po(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function wc(n,e){ta("update",e,n._path,!1);const t=new h.BH;return function ec(n,e,t,i){li(n,"update",{path:e.toString(),value:t});let s=!0;const o=Qi(n),l={};if(ue(t,(u,d)=>{s=!1,l[u]=Zo(ee(e,u),ne(d),n.serverSyncTree_,o)}),s)re("update() called with empty data.  Don't do anything."),un(0,i,"ok",void 0);else{const u=tr(n),d=function Sl(n,e,t,i){!function ja(n,e,t,i){(0,h.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=jr(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const s=te.fromObject(t);return ai(n,new rn({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s))}(n.serverSyncTree_,e,l,u);er(n.eventQueue_,d),n.server_.merge(e.toString(),t,(p,_)=>{const b="ok"===p;b||oe("update at "+e+" failed: "+p);const E=cn(n.serverSyncTree_,u,!b),S=E.length>0?ci(n,e):e;Qe(n.eventQueue_,S,E),un(0,i,p,_)}),ue(t,p=>{const _=_o(n,ee(e,p));ci(n,_)}),Qe(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yc(n){n=(0,h.m9)(n);const e=new vo(()=>{}),t=new $i(e);return function Jl(n,e,t){const i=function Rl(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(p,_)=>{const b=Ie(p,t);i=i||an(_,b)});let s=n.syncPointTree_.get(t);s?i=i||an(s,U()):(s=new Uo,n.syncPointTree_=n.syncPointTree_.set(t,s));const o=null!=i,l=o?new At(i,!0,!1):null;return function pl(n){return $(n.viewCache_)}(Vo(s,e,Vs(n.pendingWriteTree_,e._path),o?l.getNode():N.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(s=>{const o=ne(s).withIndex(e._queryParams.getIndex());let l;if(Jr(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Ui(n.serverSyncTree_,e._path,o);else{const u=Vi(n.serverSyncTree_,e);l=Ko(n.serverSyncTree_,e._path,o,u)}return Qe(n.eventQueue_,e._path,l),Qs(n.serverSyncTree_,e,t,null,!0),o},s=>(li(n,"get for query "+(0,h.Wl)(e)+" failed: "+s),Promise.reject(new Error(s))))}(n._repo,n,t).then(i=>new Rn(i,new rt(n._repo,n._path),n._queryParams.getIndex()))}class $i{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new ga("value",this,new Rn(e.snapshotNode,new rt(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ma(this,e,t):null}matches(e){return e instanceof $i&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class or{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ma(this,e,t):null}createEvent(e,t){(0,h.hu)(null!=e.childName,"Child events should have a childName.");const i=Nn(new rt(t._repo,t._path),e.childName),s=t._queryParams.getIndex();return new ga(e.type,this,new Rn(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof or&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function qi(n,e,t,i,s){let o;if("object"==typeof i&&(o=void 0,s=i),"function"==typeof i&&(o=i),s&&s.onlyOnce){const d=t,p=(_,b)=>{go(n._repo,n,u),d(_,b)};p.userCallback=t.userCallback,p.context=t.context,t=p}const l=new vo(t,o||void 0),u="value"===e?new $i(l):new or(e,l);return function rc(n,e,t){let i;i=".info"===M(e._path)?Jr(n.infoSyncTree_,e,t):Jr(n.serverSyncTree_,e,t),ia(n.eventQueue_,e._path,i)}(n._repo,n,u),()=>go(n._repo,n,u)}function Co(n,e,t,i){return qi(n,"value",e,t,i)}function va(n,e,t,i){return qi(n,"child_added",e,t,i)}function ba(n,e,t,i){return qi(n,"child_changed",e,t,i)}function Ca(n,e,t,i){return qi(n,"child_moved",e,t,i)}function Ea(n,e,t,i){return qi(n,"child_removed",e,t,i)}function Ia(n,e,t){let i=null;const s=t?new vo(t):null;"value"===e?i=new $i(s):e&&(i=new or(e,s)),go(n._repo,n,i)}class ft{}class Ta extends ft{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xt("endAt",this._value,e._path,!0);const t=Di(e._queryParams,this._value,this._key);if(rr(t),dn(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ue(e._repo,e._path,t,e._orderByCalled)}}class bc extends ft{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xt("endBefore",this._value,e._path,!1);const t=function Wr(n,e,t){let i;return i=Di(n,e,n.index_===Ke||t?t:Ae),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(rr(t),dn(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ue(e._repo,e._path,t,e._orderByCalled)}}class Sa extends ft{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xt("startAt",this._value,e._path,!0);const t=Ni(e._queryParams,this._value,this._key);if(rr(t),dn(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ue(e._repo,e._path,t,e._orderByCalled)}}class Ic extends ft{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){xt("startAfter",this._value,e._path,!1);const t=function Br(n,e,t){let i;return i=Ni(n,e,n.index_===Ke||t?t:Fe),i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(rr(t),dn(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ue(e._repo,e._path,t,e._orderByCalled)}}class Sc extends ft{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ue(e._repo,e._path,function Mr(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class kc extends ft{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ue(e._repo,e._path,function Fr(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Pc extends ft{constructor(e){super(),this._path=e}_apply(e){sr(e,"orderByChild");const t=new Y(this._path);if(F(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new xi(t),s=ni(e._queryParams,i);return dn(s),new Ue(e._repo,e._path,s,!0)}}class Nc extends ft{_apply(e){sr(e,"orderByKey");const t=ni(e._queryParams,Ke);return dn(t),new Ue(e._repo,e._path,t,!0)}}class Oc extends ft{_apply(e){sr(e,"orderByPriority");const t=ni(e._queryParams,Z);return dn(t),new Ue(e._repo,e._path,t,!0)}}class Mc extends ft{_apply(e){sr(e,"orderByValue");const t=ni(e._queryParams,ei);return dn(t),new Ue(e._repo,e._path,t,!0)}}class Bc extends ft{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(xt("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ta(this._value,this._key)._apply(new Sa(this._value,this._key)._apply(e))}}function pt(n,...e){let t=(0,h.m9)(n);for(const i of e)t=i._apply(t);return t}(function wl(n){(0,h.hu)(!zs,"__referenceConstructor has already been defined"),zs=n})(rt),function El(n){(0,h.hu)(!Ys,"__referenceConstructor has already been defined"),Ys=n}(rt);const Eo={};function ka(n,e,t,i,s){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||X("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),re("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let d,p,l=yo(o,s),u=l.repoInfo;typeof process<"u"&&process.env&&(p=process.env.FIREBASE_DATABASE_EMULATOR_HOST),p?(d=!0,o=`http://${p}?ns=${u.namespace}`,l=yo(o,s),u=l.repoInfo):d=!l.repoInfo.secure;const _=s&&d?new ke(ke.OWNER):new z(n.name,n.options,e);na("Invalid Firebase Database URL",l),F(l.path)||X("Database URL must point to the root of a Firebase Database (not including a child path).");const b=function jc(n,e,t,i){let s=Eo[e.name];s||(s={},Eo[e.name]=s);let o=s[n.toURLString()];return o&&X("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ql(n,false,t,i),s[n.toURLString()]=o,o}(u,n,_,new Be(n.name,t));return new zc(b,n)}class zc{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Zl(n,e,t){if(n.stats_=zn(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new nt(n.repoInfo_,(i,s,o,l)=>{aa(n,i,s,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>la(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,h.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new St(n.repoInfo_,e,(i,s,o,l)=>{aa(n,i,s,o,l)},i=>{la(n,i)},i=>{!function Xl(n,e){ue(e,(t,i)=>{fo(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function ur(n,e){const t=n.toString();return mi[t]||(mi[t]=e()),mi[t]}(n.repoInfo_,()=>new it(n.stats_,n.server_)),n.infoData_=new Bs,n.infoSyncTree_=new zo({startListening:(i,s,o,l)=>{let u=[];const d=n.infoData_.getNode(i._path);return d.isEmpty()||(u=Ui(n.infoSyncTree_,i._path,d),setTimeout(()=>{l("ok")},0)),u},stopListening:()=>{}}),fo(n,"connected",!1),n.serverSyncTree_=new zo({startListening:(i,s,o,l)=>(n.server_.listen(i,o,s,(u,d)=>{const p=l(u,d);Qe(n.eventQueue_,i._path,p)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new rt(this._repo,U())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Hc(n,e){const t=Eo[e];(!t||t[n.key]!==n)&&X(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ua(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&X("Cannot call "+e+" on a deleted database.")}}function xa(){yi.IS_TRANSPORT_INITIALIZED&&oe("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Kc(){xa(),Ct.forceDisallow()}function Yc(){xa(),qt.forceDisallow(),Ct.forceAllow()}function qc(n,e){Un(n,e)}const Xc={".sv":"timestamp"};class tu{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}St.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},St.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Zc(n){Lt(Je.SDK_VERSION),(0,Je._registerComponent)(new at.wA("database",(e,{instanceIdentifier:t})=>ka(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Je.registerVersion)(Re,"0.14.4",n),(0,Je.registerVersion)(Re,"0.14.4","esm2017")}();const ru=new de.Yd("@firebase/database-compat"),Ra=function(n){ru.warn("FIREBASE WARNING: "+n)};class lu{constructor(e){this._delegate=e}cancel(e){(0,h.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,h.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,h.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,h.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,h.Dv)("OnDisconnect.set",1,2,arguments.length),(0,h.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),s=>t(s)),i}setWithPriority(e,t,i){(0,h.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,h.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const s=this._delegate.setWithPriority(e,t);return i&&s.then(()=>i(null),o=>i(o)),s}update(e,t){if((0,h.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let o=0;o<e.length;++o)s[""+o]=e[o];e=s,Ra("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,h.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),s=>t(s)),i}}class cu{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,h.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class hn{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,h.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,h.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,h.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,h.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,h.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Yi("DataSnapshot.child","path",e,!1),new hn(this._database,this._delegate.child(e))}hasChild(e){return(0,h.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Yi("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,h.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,h.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,h.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new hn(this._database,t)))}hasChildren(){return(0,h.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,h.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,h.Dv)("DataSnapshot.ref",0,0,arguments.length),new $e(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Te{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,s){var o;(0,h.Dv)("Query.on",2,4,arguments.length),(0,h.Wj)("Query.on","callback",t,!1);const l=Te.getCancelAndContextArgs_("Query.on",i,s),u=(p,_)=>{t.call(l.context,new hn(this.database,p),_)};u.userCallback=t,u.context=l.context;const d=null===(o=l.cancel)||void 0===o?void 0:o.bind(l.context);switch(e){case"value":return Co(this._delegate,u,d),t;case"child_added":return va(this._delegate,u,d),t;case"child_removed":return Ea(this._delegate,u,d),t;case"child_changed":return ba(this._delegate,u,d),t;case"child_moved":return Ca(this._delegate,u,d),t;default:throw new Error((0,h.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,h.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,h.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,h.Wj)("Query.off","callback",t,!0),(0,h.lb)("Query.off","context",i,!0),t){const s=()=>{};s.userCallback=t,s.context=i,Ia(this._delegate,e,s)}else Ia(this._delegate,e)}get(){return yc(this._delegate).then(e=>new hn(this.database,e))}once(e,t,i,s){(0,h.Dv)("Query.once",1,4,arguments.length),(0,h.Wj)("Query.once","callback",t,!0);const o=Te.getCancelAndContextArgs_("Query.once",i,s),l=new h.BH,u=(p,_)=>{const b=new hn(this.database,p);t&&t.call(o.context,b,_),l.resolve(b)};u.userCallback=t,u.context=o.context;const d=p=>{o.cancel&&o.cancel.call(o.context,p),l.reject(p)};switch(e){case"value":Co(this._delegate,u,d,{onlyOnce:!0});break;case"child_added":va(this._delegate,u,d,{onlyOnce:!0});break;case"child_removed":Ea(this._delegate,u,d,{onlyOnce:!0});break;case"child_changed":ba(this._delegate,u,d,{onlyOnce:!0});break;case"child_moved":Ca(this._delegate,u,d,{onlyOnce:!0});break;default:throw new Error((0,h.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,h.Dv)("Query.limitToFirst",1,1,arguments.length),new Te(this.database,pt(this._delegate,function Ac(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Sc(n)}(e)))}limitToLast(e){return(0,h.Dv)("Query.limitToLast",1,1,arguments.length),new Te(this.database,pt(this._delegate,function xc(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kc(n)}(e)))}orderByChild(e){return(0,h.Dv)("Query.orderByChild",1,1,arguments.length),new Te(this.database,pt(this._delegate,function Rc(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yi("orderByChild","path",n,!1),new Pc(n)}(e)))}orderByKey(){return(0,h.Dv)("Query.orderByKey",0,0,arguments.length),new Te(this.database,pt(this._delegate,function Dc(){return new Nc}()))}orderByPriority(){return(0,h.Dv)("Query.orderByPriority",0,0,arguments.length),new Te(this.database,pt(this._delegate,function Lc(){return new Oc}()))}orderByValue(){return(0,h.Dv)("Query.orderByValue",0,0,arguments.length),new Te(this.database,pt(this._delegate,function Fc(){return new Mc}()))}startAt(e=null,t){return(0,h.Dv)("Query.startAt",0,2,arguments.length),new Te(this.database,pt(this._delegate,function Ec(n=null,e){return Ki("startAt","key",e,!0),new Sa(n,e)}(e,t)))}startAfter(e=null,t){return(0,h.Dv)("Query.startAfter",0,2,arguments.length),new Te(this.database,pt(this._delegate,function Tc(n,e){return Ki("startAfter","key",e,!0),new Ic(n,e)}(e,t)))}endAt(e=null,t){return(0,h.Dv)("Query.endAt",0,2,arguments.length),new Te(this.database,pt(this._delegate,function vc(n,e){return Ki("endAt","key",e,!0),new Ta(n,e)}(e,t)))}endBefore(e=null,t){return(0,h.Dv)("Query.endBefore",0,2,arguments.length),new Te(this.database,pt(this._delegate,function Cc(n,e){return Ki("endBefore","key",e,!0),new bc(n,e)}(e,t)))}equalTo(e,t){return(0,h.Dv)("Query.equalTo",1,2,arguments.length),new Te(this.database,pt(this._delegate,function Wc(n,e){return Ki("equalTo","key",e,!0),new Bc(n,e)}(e,t)))}toString(){return(0,h.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,h.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,h.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Te))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const s={cancel:void 0,context:void 0};if(t&&i)s.cancel=t,(0,h.Wj)(e,"cancel",s.cancel,!0),s.context=i,(0,h.lb)(e,"context",s.context,!0);else if(t)if("object"==typeof t&&null!==t)s.context=t;else{if("function"!=typeof t)throw new Error((0,h.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");s.cancel=t}return s}get ref(){return new $e(this.database,new rt(this._delegate._repo,this._delegate._path))}}class $e extends Te{constructor(e,t){super(e,new Ue(t._repo,t._path,new ti,!1)),this.database=e,this._delegate=t}getKey(){return(0,h.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,h.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new $e(this.database,Nn(this._delegate,e))}getParent(){(0,h.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new $e(this.database,e):null}getRoot(){return(0,h.Dv)("Reference.root",0,0,arguments.length),new $e(this.database,this._delegate.root)}set(e,t){(0,h.Dv)("Reference.set",1,2,arguments.length),(0,h.Wj)("Reference.set","onComplete",t,!0);const i=bo(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}update(e,t){if((0,h.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const s={};for(let o=0;o<e.length;++o)s[""+o]=e[o];e=s,Ra("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}st("Reference.update",this._delegate._path),(0,h.Wj)("Reference.update","onComplete",t,!0);const i=wc(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}setWithPriority(e,t,i){(0,h.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,h.Wj)("Reference.setWithPriority","onComplete",i,!0);const s=function _c(n,e,t){if(st("setWithPriority",n._path),xt("setWithPriority",e,n._path,!1),ho("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new h.BH;return po(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&s.then(()=>i(null),o=>i(o)),s}remove(e){(0,h.Dv)("Reference.remove",0,1,arguments.length),(0,h.Wj)("Reference.remove","onComplete",e,!0);const t=function gc(n){return st("remove",n._path),bo(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,h.Dv)("Reference.transaction",1,3,arguments.length),(0,h.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,h.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,h.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const s=function nu(n,e,t){var i;if(n=(0,h.m9)(n),st("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const s=null===(i=t?.applyLocally)||void 0===i||i,o=new h.BH,u=Co(n,()=>{});return function ac(n,e,t,i,s,o){li(n,"transaction on "+e);const l={path:e,update:t,onComplete:i,status:null,order:le(),applyLocally:o,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=mo(n,e,void 0);l.currentInputSnapshot=u;const d=l.update(u.val());if(void 0===d)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{zi("transaction failed: Data returned ",d,l.path),l.status=0;const p=Zs(n.transactionQueueTree_,e),_=Pn(p)||[];let b;_.push(l),lo(p,_),"object"==typeof d&&null!==d&&(0,h.r3)(d,".priority")?(b=(0,h.DV)(d,".priority"),(0,h.hu)(Gi(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):b=($s(n.serverSyncTree_,e)||N.EMPTY_NODE).getPriority().val();const E=Qi(n),S=ne(d,b),k=ro(S,u,E);l.currentOutputSnapshotRaw=S,l.currentOutputSnapshotResolved=k,l.currentWriteId=tr(n);const V=Xr(n.serverSyncTree_,e,k,l.currentWriteId,l.applyLocally);Qe(n.eventQueue_,e,V),nr(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(d,p,_)=>{let b=null;d?o.reject(d):(b=new Rn(_,new rt(n._repo,n._path),Z),o.resolve(new tu(p,b)))},u,s),o.promise}(this._delegate,e,{applyLocally:i}).then(o=>new cu(o.committed,new hn(this.database,o.snapshot)));return t&&s.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),s}setPriority(e,t){(0,h.Dv)("Reference.setPriority",1,2,arguments.length),(0,h.Wj)("Reference.setPriority","onComplete",t,!0);const i=function mc(n,e){n=(0,h.m9)(n),st("setPriority",n._path),ho("setPriority",e,!1);const t=new h.BH;return po(n._repo,ee(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),s=>t(s)),i}push(e,t){(0,h.Dv)("Reference.push",0,2,arguments.length),(0,h.Wj)("Reference.push","onComplete",t,!0);const i=function pc(n,e){n=(0,h.m9)(n),st("push",n._path),xt("push",e,n._path,!0);const t=oa(n._repo),i=fc(t),s=Nn(n,i),o=Nn(n,i);let l;return l=null!=e?bo(o,e).then(()=>o):Promise.resolve(o),s.then=l.then.bind(l),s.catch=l.then.bind(l,void 0),s}(this._delegate,e),s=i.then(l=>new $e(this.database,l));t&&s.then(()=>t(null),l=>t(l));const o=new $e(this.database,i);return o.then=s.then.bind(s),o.catch=s.catch.bind(s,void 0),o}onDisconnect(){return st("Reference.onDisconnect",this._delegate._path),new lu(new _a(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Zi{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Kc,forceLongPolling:Yc}}useEmulator(e,t,i={}){!function Pa(n,e,t,i={}){(n=(0,h.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&X("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&X('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ke(ke.OWNER);else if(i.mockUserToken){const l="string"==typeof i.mockUserToken?i.mockUserToken:(0,h.Sg)(i.mockUserToken,n.app.options.projectId);o=new ke(l)}!function Vc(n,e,t,i){n.repoInfo_=new jn(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}(s,e,t,o)}(this._delegate,e,t,i)}ref(e){if((0,h.Dv)("database.ref",0,1,arguments.length),e instanceof $e){const t=ya(this._delegate,e.toString());return new $e(this,t)}{const t=wa(this._delegate,e);return new $e(this,t)}}refFromURL(e){(0,h.Dv)("database.refFromURL",1,1,arguments.length);const i=ya(this._delegate,e);return new $e(this,i)}goOffline(){return(0,h.Dv)("database.goOffline",0,0,arguments.length),function Qc(n){(n=(0,h.m9)(n))._checkNotDeleted("goOffline"),ua(n._repo)}(this._delegate)}goOnline(){return(0,h.Dv)("database.goOnline",0,0,arguments.length),function $c(n){(n=(0,h.m9)(n))._checkNotDeleted("goOnline"),function oc(n){n.persistentConnection_&&n.persistentConnection_.resume(ra)}(n._repo)}(this._delegate)}}Zi.ServerValue={TIMESTAMP:function Jc(){return Xc}(),increment:n=>function eu(n){return{".sv":{increment:n}}}(n)};var du=Object.freeze({__proto__:null,initStandalone:function uu({app:n,url:e,version:t,customAuthImpl:i,namespace:s,nodeAdmin:o=!1}){Lt(t);const l=new at.zt("auth-internal",new at.H0("database-standalone"));return l.setComponent(new at.wA("auth-internal",()=>i,"PRIVATE")),{instance:new Zi(ka(n,l,void 0,e,o),n),namespace:s}}});const hu=Zi.ServerValue;function Na(n){return null==n}function Da(n){return"function"==typeof n.set}function Oa(n,e){return Da(e)?e:n.ref(e)}function La(n,e){if(function pu(n){return"string"==typeof n}(n))return e.stringCase();if(Da(n))return e.firebaseCase();if(function gu(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Xi(n,e,t="on",i=gn.z){return new On.y(s=>{let o=null;return o=n[t](e,(l,u)=>{i.schedule(()=>{s.next({snapshot:l,prevKey:u})}),"once"===t&&i.schedule(()=>s.complete())},l=>{i.schedule(()=>s.error(l))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,Le.U)(s=>{const{snapshot:o,prevKey:l}=s;let u=null;return o.exists()&&(u=o.key),{type:e,payload:o,prevKey:l,key:u}}),(0,fn.B)())}function Ma(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function wu(n,e){const{payload:t,prevKey:i,key:s}=e,o=Ma(n,s),l=function _u(n,e){if(Na(e))return 0;{const t=Ma(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let u=null;e.payload.forEach(d=>{const p={payload:d,type:"value",prevKey:u,key:d.key};return u=d.key,n=[...n,p],!1})}return n;case"child_added":if(o>-1){const u=n[o-1];(u&&u.key||null)!==i&&(n=n.filter(d=>d.payload.key!==t.key)).splice(l,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(u=>u.payload.key!==t.key);case"child_changed":return n.map(u=>u.payload.key===s?e:u);case"child_moved":if(o>-1){const u=n.splice(o,1)[0];return(n=n.slice()).splice(l,0,u),n}return n;default:return n}}function Fa(n){return(Na(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ba(n,e,t){return function mu(n,e,t){return Xi(n,"value","once",t).pipe((0,Ve.w)(i=>{const s=[(0,J.of)(i)];return e.forEach(o=>s.push(Xi(n,o,"on",t))),(0,O.T)(...s).pipe((0,Dt.R)(wu,[]))}),(0,Pe.x)())}(n,e=Fa(e),t)}function Wa(n,e,t){const i=(e=Fa(e)).map(s=>Xi(n,s,"on",t));return(0,O.T)(...i)}function Ua(n,e){return function(i,s){return La(i,{stringCase:()=>n.child(i)[e](s),firebaseCase:()=>i[e](s),snapshotCase:()=>i.ref[e](s)})}}function Cu(n){return function(t){return t?La(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Va(n,e){return function(){return Xi(n,"value","on",e)}}!function fu(n){n.INTERNAL.registerComponent(new at.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:t});return new Zi(s,i)},"PUBLIC").setServiceProps({Reference:$e,Query:Te,Database:Zi,DataSnapshot:hn,enableLogging:qc,INTERNAL:du,ServerValue:hu}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(_n.Z);const Tu=new P.OlP("angularfire2.realtimeDatabaseURL"),Su=new P.OlP("angularfire2.database.use-emulator");let Au=(()=>{class n{constructor(t,i,s,o,l,u,d,p,_,b,E,S,k,V,se){this.schedulers=u;const De=d,qe=(0,Me.on)(t,l,i);p&&pn(qe,l,_,E,S,k,b,V),this.database=(0,Me.cc)(`${qe.name}.database.${s}`,"AngularFireDatabase",qe.name,()=>{const Pt=l.runOutsideAngular(()=>qe.database(s||void 0));return De&&Pt.useEmulator(...De),Pt},[De])}list(t,i){const s=this.schedulers.ngZone.runOutsideAngular(()=>Oa(this.database,t));let o=s;return i&&(o=i(s)),function Eu(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Ua(i,"update"),set:Ua(i,"set"),push:s=>i.push(s),remove:Cu(i),snapshotChanges:s=>Ba(n,s,t).pipe(je.iC),stateChanges:s=>Wa(n,s,t).pipe(je.iC),auditTrail:s=>function yu(n,e,t){return function bu(n,e,t){return function vu(n,e){return Xi(n,"value","on",e).pipe((0,Le.U)(t=>{let i;return t.payload.forEach(s=>(i=s.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(function Ot(...n){const e=(0,Bn.jO)(n);return(0,ot.e)((t,i)=>{const s=n.length,o=new Array(s);let l=n.map(()=>!1),u=!1;for(let d=0;d<s;d++)(0,hi.Xf)(n[d]).subscribe((0,Ge.x)(i,p=>{o[d]=p,!u&&!l[d]&&(l[d]=!0,(u=l.every(_t.y))&&(l=null))},ze.Z));t.subscribe((0,Ge.x)(i,d=>{if(u){const p=[d,...o];i.next(e?e(...p):p)}}))})}(e),(0,Le.U)(([s,o])=>{const l=s.lastKeyToLoad,u=o.map(d=>d.key);return{actions:o,lastKeyToLoad:l,loadedKeys:u}}),function mn(n){return(0,ot.e)((e,t)=>{let i=!1,s=0;e.subscribe((0,Ge.x)(t,o=>(i||(i=!n(o,s++)))&&t.next(o)))})}(s=>-1===s.loadedKeys.indexOf(s.lastKeyToLoad)),(0,Le.U)(s=>s.actions))}(n,Wa(n,e).pipe((0,Dt.R)((s,o)=>[...s,o],[])),t)}(n,s,t).pipe(je.iC),valueChanges:(s,o)=>Ba(n,s,t).pipe((0,Le.U)(u=>u.map(d=>o&&o.idField?Object.assign(Object.assign({},d.payload.val()),{[o.idField]:d.key}):d.payload.val())),je.iC)}}(o,this)}object(t){return function Iu(n,e){return{query:n,snapshotChanges:()=>Va(n,e.schedulers.outsideAngular)().pipe(je.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Va(n,e.schedulers.outsideAngular)().pipe(je.iC,(0,Le.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Oa(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(P.LFG(Me.Dh),P.LFG(Me.xv,8),P.LFG(Tu,8),P.LFG(P.Lbi),P.LFG(P.R0b),P.LFG(je.HU),P.LFG(Su,8),P.LFG(Xe,8),P.LFG(ae,8),P.LFG(mt,8),P.LFG(ve,8),P.LFG(H,8),P.LFG(Ze,8),P.LFG(Fn,8),P.LFG(Gt.nm,8))},n.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ku=(()=>{class n{constructor(t,i){this.afauth=t,this.db=i}login(t,i){var s=this;return(0,R.Z)(function*(){try{return yield s.afauth.signInWithEmailAndPassword(t,i)}catch(o){return console.log("error en login: ",o),null}})()}register({email:t,password:i}){var s=this;return(0,R.Z)(function*(){try{return{success:!0,user:(yield s.afauth.createUserWithEmailAndPassword(t,i)).user}}catch(o){return"auth/email-already-in-use"===o.code?{success:!1,error:"El correo electr\xf3nico ya est\xe1 en uso por otra cuenta."}:{success:!1,error:"Se produjo un error al registrar el usuario. Por favor, int\xe9ntelo nuevamente m\xe1s tarde."}}})()}logLogin(){var t=this;return(0,R.Z)(function*(){const i=yield t.afauth.currentUser;if(null!=i){const s=i.email,o=(new Date).toISOString();t.db.list("/logUser").push({email:s,timestamp:o})}})()}logOut(){var t=this;return(0,R.Z)(function*(){try{return yield t.afauth.signOut()}catch(i){return console.log("error en login: ",i),null}})()}getUserLoggedIn(){return this.afauth.authState}static#e=this.\u0275fac=function(i){return new(i||n)(P.LFG(Xe),P.LFG(Au))};static#t=this.\u0275prov=P.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},3519:function(ar){ar.exports=function(){"use strict";function gt(r,a){return function P(r,a){return a.get?a.get.call(r):a.value}(r,R(r,a,"get"))}function x(r,a,c){return function y(r,a,c){if(a.set)a.set.call(r,c);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=c}}(r,R(r,a,"set"),c),c}function R(r,a,c){if(!a.has(r))throw new TypeError("attempted to "+c+" private field on non-instance");return a.get(r)}function On(r,a,c){(function J(r,a){if(a.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")})(r,a),a.set(r,c)}const O={},Ve=r=>new Promise(a=>{if(!r)return a();const c=window.scrollX,f=window.scrollY;O.restoreFocusTimeout=setTimeout(()=>{O.previousActiveElement instanceof HTMLElement?(O.previousActiveElement.focus(),O.previousActiveElement=null):document.body&&document.body.focus(),a()},100),window.scrollTo(c,f)}),v=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((r,a)=>(r[a]="swal2-"+a,r),{}),Rt=["success","warning","info","question","error"].reduce((r,a)=>(r[a]="swal2-"+a,r),{}),Mn="SweetAlert2:",Nt=r=>r.charAt(0).toUpperCase()+r.slice(1),_e=r=>{console.warn("".concat(Mn," ").concat("object"==typeof r?r.join(" "):r))},He=r=>{console.error("".concat(Mn," ").concat(r))},Ht=[],Me=(r,a)=>{(r=>{Ht.includes(r)||(Ht.push(r),_e(r))})('"'.concat(r,'" is deprecated and will be removed in the next major release. Please use "').concat(a,'" instead.'))},jt=r=>"function"==typeof r?r():r,Gt=r=>r&&"function"==typeof r.toPromise,zt=r=>Gt(r)?r.toPromise():Promise.resolve(r),Kt=r=>r&&Promise.resolve(r)===r,ae=()=>document.body.querySelector(".".concat(v.container)),mt=r=>{const a=ae();return a?a.querySelector(r):null},ve=r=>mt(".".concat(r)),H=()=>ve(v.popup),Ze=()=>ve(v.icon),pn=()=>ve(v.title),Xe=()=>ve(v["html-container"]),di=()=>ve(v.image),gn=()=>ve(v["progress-steps"]),Dt=()=>ve(v["validation-message"]),Pe=()=>mt(".".concat(v.actions," .").concat(v.confirm)),ot=()=>mt(".".concat(v.actions," .").concat(v.cancel)),Ge=()=>mt(".".concat(v.actions," .").concat(v.deny)),_t=()=>mt(".".concat(v.loader)),ze=()=>ve(v.actions),Bn=()=>ve(v.footer),Ot=()=>ve(v["timer-progress-bar"]),mn=()=>ve(v.close),_n=()=>{const r=H();if(!r)return[];const a=r.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),c=Array.from(a).sort((A,K)=>{const $=parseInt(A.getAttribute("tabindex")||"0"),Q=parseInt(K.getAttribute("tabindex")||"0");return $>Q?1:$<Q?-1:0}),f=r.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),C=Array.from(f).filter(A=>"-1"!==A.getAttribute("tabindex"));return[...new Set(c.concat(C))].filter(A=>we(A))},at=()=>Re(document.body,v.shown)&&!Re(document.body,v["toast-shown"])&&!Re(document.body,v["no-backdrop"]),Je=()=>{const r=H();return!!r&&Re(r,v.toast)},de=(r,a)=>{if(r.textContent="",a){const f=(new DOMParser).parseFromString(a,"text/html"),C=f.querySelector("head");C&&Array.from(C.childNodes).forEach(K=>{r.appendChild(K)});const A=f.querySelector("body");A&&Array.from(A.childNodes).forEach(K=>{K instanceof HTMLVideoElement||K instanceof HTMLAudioElement?r.appendChild(K.cloneNode(!0)):r.appendChild(K)})}},Re=(r,a)=>{if(!a)return!1;const c=a.split(/\s+/);for(let f=0;f<c.length;f++)if(!r.classList.contains(c[f]))return!1;return!0},fe=(r,a,c)=>{if(((r,a)=>{Array.from(r.classList).forEach(c=>{!Object.values(v).includes(c)&&!Object.values(Rt).includes(c)&&!Object.values(a.showClass||{}).includes(c)&&r.classList.remove(c)})})(r,a),a.customClass&&a.customClass[c]){if("string"!=typeof a.customClass[c]&&!a.customClass[c].forEach)return void _e("Invalid type of customClass.".concat(c,'! Expected string or iterable object, got "').concat(typeof a.customClass[c],'"'));W(r,a.customClass[c])}},Lt=(r,a)=>{if(!a)return null;switch(a){case"select":case"textarea":case"file":return r.querySelector(".".concat(v.popup," > .").concat(v[a]));case"checkbox":return r.querySelector(".".concat(v.popup," > .").concat(v.checkbox," input"));case"radio":return r.querySelector(".".concat(v.popup," > .").concat(v.radio," input:checked"))||r.querySelector(".".concat(v.popup," > .").concat(v.radio," input:first-child"));case"range":return r.querySelector(".".concat(v.popup," > .").concat(v.range," input"));default:return r.querySelector(".".concat(v.popup," > .").concat(v.input))}},be=r=>{if(r.focus(),"file"!==r.type){const a=r.value;r.value="",r.value=a}},wt=(r,a,c)=>{!r||!a||("string"==typeof a&&(a=a.split(/\s+/).filter(Boolean)),a.forEach(f=>{Array.isArray(r)?r.forEach(C=>{c?C.classList.add(f):C.classList.remove(f)}):c?r.classList.add(f):r.classList.remove(f)}))},W=(r,a)=>{wt(r,a,!0)},pe=(r,a)=>{wt(r,a,!1)},Se=(r,a)=>{const c=Array.from(r.children);for(let f=0;f<c.length;f++){const C=c[f];if(C instanceof HTMLElement&&Re(C,a))return C}},Ce=(r,a,c)=>{c==="".concat(parseInt(c))&&(c=parseInt(c)),c||0===parseInt(c)?r.style[a]="number"==typeof c?"".concat(c,"px"):c:r.style.removeProperty(a)},le=function(r){r&&(r.style.display=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flex")},ce=r=>{r&&(r.style.display="none")},yt=(r,a,c,f)=>{const C=r.querySelector(a);C&&(C.style[c]=f)},he=function(r,a){a?le(r,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"flex"):ce(r)},we=r=>!(!r||!(r.offsetWidth||r.offsetHeight||r.getClientRects().length)),re=r=>r.scrollHeight>r.clientHeight,vt=r=>{const a=window.getComputedStyle(r),c=parseFloat(a.getPropertyValue("animation-duration")||"0"),f=parseFloat(a.getPropertyValue("transition-duration")||"0");return c>0||f>0},bt=function(r){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const c=Ot();c&&we(c)&&(a&&(c.style.transition="none",c.style.width="100%"),setTimeout(()=>{c.style.transition="width ".concat(r/1e3,"s linear"),c.style.width="0%"},10))},oe=()=>typeof window>"u"||typeof document>"u",wn='\n <div aria-labelledby="'.concat(v.title,'" aria-describedby="').concat(v["html-container"],'" class="').concat(v.popup,'" tabindex="-1">\n   <button type="button" class="').concat(v.close,'"></button>\n   <ul class="').concat(v["progress-steps"],'"></ul>\n   <div class="').concat(v.icon,'"></div>\n   <img class="').concat(v.image,'" />\n   <h2 class="').concat(v.title,'" id="').concat(v.title,'"></h2>\n   <div class="').concat(v["html-container"],'" id="').concat(v["html-container"],'"></div>\n   <input class="').concat(v.input,'" id="').concat(v.input,'" />\n   <input type="file" class="').concat(v.file,'" />\n   <div class="').concat(v.range,'">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="').concat(v.select,'" id="').concat(v.select,'"></select>\n   <div class="').concat(v.radio,'"></div>\n   <label class="').concat(v.checkbox,'">\n     <input type="checkbox" id="').concat(v.checkbox,'" />\n     <span class="').concat(v.label,'"></span>\n   </label>\n   <textarea class="').concat(v.textarea,'" id="').concat(v.textarea,'"></textarea>\n   <div class="').concat(v["validation-message"],'" id="').concat(v["validation-message"],'"></div>\n   <div class="').concat(v.actions,'">\n     <div class="').concat(v.loader,'"></div>\n     <button type="button" class="').concat(v.confirm,'"></button>\n     <button type="button" class="').concat(v.deny,'"></button>\n     <button type="button" class="').concat(v.cancel,'"></button>\n   </div>\n   <div class="').concat(v.footer,'"></div>\n   <div class="').concat(v["timer-progress-bar-container"],'">\n     <div class="').concat(v["timer-progress-bar"],'"></div>\n   </div>\n </div>\n').replace(/(^|\n)\s*/g,""),ye=()=>{O.currentInstance.resetValidationMessage()},lt=r=>{const a=(()=>{const r=ae();return!!r&&(r.remove(),pe([document.documentElement,document.body],[v["no-backdrop"],v["toast-shown"],v["has-column"]]),!0)})();if(oe())return void He("SweetAlert2 requires document to initialize");const c=document.createElement("div");c.className=v.container,a&&W(c,v["no-transition"]),de(c,wn);const f=(r=>"string"==typeof r?document.querySelector(r):r)(r.target);f.appendChild(c),(r=>{const a=H();a.setAttribute("role",r.toast?"alert":"dialog"),a.setAttribute("aria-live",r.toast?"polite":"assertive"),r.toast||a.setAttribute("aria-modal","true")})(r),(r=>{"rtl"===window.getComputedStyle(r).direction&&W(ae(),v.rtl)})(f),(()=>{const r=H(),a=Se(r,v.input),c=Se(r,v.file),f=r.querySelector(".".concat(v.range," input")),C=r.querySelector(".".concat(v.range," output")),A=Se(r,v.select),K=r.querySelector(".".concat(v.checkbox," input")),$=Se(r,v.textarea);a.oninput=ye,c.onchange=ye,A.onchange=ye,K.onchange=ye,$.oninput=ye,f.oninput=()=>{ye(),C.value=f.value},f.onchange=()=>{ye(),C.value=f.value}})()},Mt=(r,a)=>{r instanceof HTMLElement?a.appendChild(r):"object"==typeof r?Vn(r,a):r&&de(a,r)},Vn=(r,a)=>{r.jquery?ue(a,r):de(a,r.toString())},ue=(r,a)=>{if(r.textContent="",0 in a)for(let c=0;c in a;c++)r.appendChild(a[c].cloneNode(!0));else r.appendChild(a.cloneNode(!0))},tt=(()=>{if(oe())return!1;const r=document.createElement("div");return typeof r.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof r.style.animation<"u"&&"animationend"})(),w=(r,a)=>{const c=ze(),f=_t();!c||!f||(a.showConfirmButton||a.showDenyButton||a.showCancelButton?le(c):ce(c),fe(c,a,"actions"),function m(r,a,c){const f=Pe(),C=Ge(),A=ot();!f||!C||!A||(I(f,"confirm",c),I(C,"deny",c),I(A,"cancel",c),function g(r,a,c,f){f.buttonsStyling?(W([r,a,c],v.styled),f.confirmButtonColor&&(r.style.backgroundColor=f.confirmButtonColor,W(r,v["default-outline"])),f.denyButtonColor&&(a.style.backgroundColor=f.denyButtonColor,W(a,v["default-outline"])),f.cancelButtonColor&&(c.style.backgroundColor=f.cancelButtonColor,W(c,v["default-outline"]))):pe([r,a,c],v.styled)}(f,C,A,c),c.reverseButtons&&(c.toast?(r.insertBefore(A,f),r.insertBefore(C,f)):(r.insertBefore(A,a),r.insertBefore(C,a),r.insertBefore(f,a))))}(c,f,a),de(f,a.loaderHtml||""),fe(f,a,"loader"))};function I(r,a,c){const f=Nt(a);he(r,c["show".concat(f,"Button")],"inline-block"),de(r,c["".concat(a,"ButtonText")]||""),r.setAttribute("aria-label",c["".concat(a,"ButtonAriaLabel")]||""),r.className=v[a],fe(r,c,"".concat(a,"Button"))}const L=(r,a)=>{const c=ae();c&&(function j(r,a){"string"==typeof a?r.style.background=a:a||W([document.documentElement,document.body],v["no-backdrop"])}(c,a.backdrop),function G(r,a){a&&(a in v?W(r,v[a]):(_e('The "position" parameter is not valid, defaulting to "center"'),W(r,v.center)))}(c,a.position),function ge(r,a){a&&W(r,v["grow-".concat(a)])}(c,a.grow),fe(c,a,"container"))};var D={innerParams:new WeakMap,domCache:new WeakMap};const Be=["input","file","range","select","radio","checkbox","textarea"],ke=r=>{if(!r.input)return;if(!Ee[r.input])return void He('Unexpected type of input! Expected "text", "email", "password", "number", "tel", "select", "radio", "checkbox", "textarea", "file" or "url", got "'.concat(r.input,'"'));const a=pi(r.input),c=Ee[r.input](a,r);le(a),r.inputAutoFocus&&setTimeout(()=>{be(c)})},es=(r,a)=>{const c=Lt(H(),r);if(c){(r=>{for(let a=0;a<r.attributes.length;a++){const c=r.attributes[a].name;["id","type","value","style"].includes(c)||r.removeAttribute(c)}})(c);for(const f in a)c.setAttribute(f,a[f])}},ts=r=>{const a=pi(r.input);"object"==typeof r.customClass&&W(a,r.customClass.input)},Hn=(r,a)=>{(!r.placeholder||a.inputPlaceholder)&&(r.placeholder=a.inputPlaceholder)},Qt=(r,a,c)=>{if(c.inputLabel){const f=document.createElement("label"),C=v["input-label"];f.setAttribute("for",r.id),f.className=C,"object"==typeof c.customClass&&W(f,c.customClass.inputLabel),f.innerText=c.inputLabel,a.insertAdjacentElement("beforebegin",f)}},pi=r=>Se(H(),v[r]||v.input),yn=(r,a)=>{["string","number"].includes(typeof a)?r.value="".concat(a):Kt(a)||_e('Unexpected type of inputValue! Expected "string", "number" or "Promise", got "'.concat(typeof a,'"'))},Ee={};Ee.text=Ee.email=Ee.password=Ee.number=Ee.tel=Ee.url=(r,a)=>(yn(r,a.inputValue),Qt(r,r,a),Hn(r,a),r.type=a.input,r),Ee.file=(r,a)=>(Qt(r,r,a),Hn(r,a),r),Ee.range=(r,a)=>{const c=r.querySelector("input"),f=r.querySelector("output");return yn(c,a.inputValue),c.type=a.input,yn(f,a.inputValue),Qt(c,r,a),r},Ee.select=(r,a)=>{if(r.textContent="",a.inputPlaceholder){const c=document.createElement("option");de(c,a.inputPlaceholder),c.value="",c.disabled=!0,c.selected=!0,r.appendChild(c)}return Qt(r,r,a),r},Ee.radio=r=>(r.textContent="",r),Ee.checkbox=(r,a)=>{const c=Lt(H(),"checkbox");c.value="1",c.checked=!!a.inputValue;const f=r.querySelector("span");return de(f,a.inputPlaceholder),c},Ee.textarea=(r,a)=>{yn(r,a.inputValue),Hn(r,a),Qt(r,r,a);return setTimeout(()=>{if("MutationObserver"in window){const f=parseInt(window.getComputedStyle(H()).width);new MutationObserver(()=>{if(!document.body.contains(r))return;const A=r.offsetWidth+(f=>parseInt(window.getComputedStyle(f).marginLeft)+parseInt(window.getComputedStyle(f).marginRight))(r);A>f?H().style.width="".concat(A,"px"):Ce(H(),"width",a.width)}).observe(r,{attributes:!0,attributeFilter:["style"]})}}),r};const gi=(r,a)=>{const c=Xe();c&&(fe(c,a,"htmlContainer"),a.html?(Mt(a.html,c),le(c,"block")):a.text?(c.textContent=a.text,le(c,"block")):ce(c),((r,a)=>{const c=H();if(!c)return;const f=D.innerParams.get(r),C=!f||a.input!==f.input;Be.forEach(A=>{const K=Se(c,v[A]);K&&(es(A,a.inputAttributes),K.className=v[A],C&&ce(K))}),a.input&&(C&&ke(a),ts(a))})(r,a))},jn=(r,a)=>{for(const[c,f]of Object.entries(Rt))a.icon!==c&&pe(r,f);W(r,a.icon&&Rt[a.icon]),mi(r,a),lr(),fe(r,a,"icon")},lr=()=>{const r=H();if(!r)return;const a=window.getComputedStyle(r).getPropertyValue("background-color"),c=r.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let f=0;f<c.length;f++)c[f].style.backgroundColor=a},Gn=(r,a)=>{if(!a.icon&&!a.iconHtml)return;let c=r.innerHTML,f="";a.iconHtml?f=zn(a.iconHtml):"success"===a.icon?(f='\n  <div class="swal2-success-circular-line-left"></div>\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>\n  <div class="swal2-success-circular-line-right"></div>\n',c=c.replace(/ style=".*?"/g,"")):"error"===a.icon?f='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':a.icon&&(f=zn({question:"?",warning:"!",info:"i"}[a.icon])),c.trim()!==f.trim()&&de(r,f)},mi=(r,a)=>{if(a.iconColor){r.style.color=a.iconColor,r.style.borderColor=a.iconColor;for(const c of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])yt(r,c,"backgroundColor",a.iconColor);yt(r,".swal2-success-ring","borderColor",a.iconColor)}},zn=r=>'<div class="'.concat(v["icon-content"],'">').concat(r,"</div>"),rs=(r,a)=>{const c=a.showClass||{};r.className="".concat(v.popup," ").concat(we(r)?c.popup:""),a.toast?(W([document.documentElement,document.body],v["toast-shown"]),W(r,v.toast)):W(r,v.modal),fe(r,a,"popup"),"string"==typeof a.customClass&&W(r,a.customClass),a.icon&&W(r,v["icon-".concat(a.icon)])},fr=r=>{const a=document.createElement("li");return W(a,v["progress-step"]),de(a,r),a},pr=r=>{const a=document.createElement("li");return W(a,v["progress-step-line"]),r.progressStepsDistance&&Ce(a,"width",r.progressStepsDistance),a},_i=(r,a)=>{((r,a)=>{const c=ae(),f=H();if(c&&f){if(a.toast){Ce(c,"width",a.width),f.style.width="100%";const C=_t();C&&f.insertBefore(C,Ze())}else Ce(f,"width",a.width);Ce(f,"padding",a.padding),a.color&&(f.style.color=a.color),a.background&&(f.style.background=a.background),ce(Dt()),rs(f,a)}})(0,a),L(0,a),((r,a)=>{const c=gn();if(!c)return;const{progressSteps:f,currentProgressStep:C}=a;f&&0!==f.length&&void 0!==C?(le(c),c.textContent="",C>=f.length&&_e("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),f.forEach((A,K)=>{const $=fr(A);if(c.appendChild($),K===C&&W($,v["active-progress-step"]),K!==f.length-1){const Q=pr(a);c.appendChild(Q)}})):ce(c)})(0,a),((r,a)=>{const c=D.innerParams.get(r),f=Ze();if(f){if(c&&a.icon===c.icon)return Gn(f,a),void jn(f,a);if(!a.icon&&!a.iconHtml)return void ce(f);if(a.icon&&-1===Object.keys(Rt).indexOf(a.icon))return He('Unknown icon! Expected "success", "error", "warning", "info" or "question", got "'.concat(a.icon,'"')),void ce(f);le(f),Gn(f,a),jn(f,a),W(f,a.showClass&&a.showClass.icon)}})(r,a),((r,a)=>{const c=di();if(c){if(!a.imageUrl)return void ce(c);le(c,""),c.setAttribute("src",a.imageUrl),c.setAttribute("alt",a.imageAlt||""),Ce(c,"width",a.imageWidth),Ce(c,"height",a.imageHeight),c.className=v.image,fe(c,a,"image")}})(0,a),((r,a)=>{const c=pn();c&&(he(c,a.title||a.titleText,"block"),a.title&&Mt(a.title,c),a.titleText&&(c.innerText=a.titleText),fe(c,a,"title"))})(0,a),((r,a)=>{const c=mn();c&&(de(c,a.closeButtonHtml||""),fe(c,a,"closeButton"),he(c,a.showCloseButton),c.setAttribute("aria-label",a.closeButtonAriaLabel||""))})(0,a),gi(r,a),w(0,a),((r,a)=>{const c=Bn();c&&(he(c,a.footer,"block"),a.footer&&Mt(a.footer,c),fe(c,a,"footer"))})(0,a);const c=H();"function"==typeof a.didRender&&c&&a.didRender(c)},ls=()=>{var r;return null===(r=Pe())||void 0===r?void 0:r.click()},$t=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),cs=r=>{r.keydownTarget&&r.keydownHandlerAdded&&(r.keydownTarget.removeEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!1)},Kn=(r,a)=>{var c;const f=_n();if(f.length)return(r+=a)===f.length?r=0:-1===r&&(r=f.length-1),void f[r].focus();null===(c=H())||void 0===c||c.focus()},ds=["ArrowRight","ArrowDown"],_r=["ArrowLeft","ArrowUp"],wr=(r,a,c)=>{r&&(a.isComposing||229===a.keyCode||(r.stopKeydownPropagation&&a.stopPropagation(),"Enter"===a.key?Ct(a,r):"Tab"===a.key?wi(a):[...ds,..._r].includes(a.key)?yr(a.key):"Escape"===a.key&&vr(a,r,c)))},Ct=(r,a)=>{if(!jt(a.allowEnterKey))return;const c=Lt(H(),a.input);if(r.target&&c&&r.target instanceof HTMLElement&&r.target.outerHTML===c.outerHTML){if(["textarea","file"].includes(a.input))return;ls(),r.preventDefault()}},wi=r=>{const a=r.target,c=_n();let f=-1;for(let C=0;C<c.length;C++)if(a===c[C]){f=C;break}Kn(f,r.shiftKey?-1:1),r.stopPropagation(),r.preventDefault()},yr=r=>{const a=ze(),c=Pe(),f=Ge(),C=ot();if(!(a&&c&&f&&C))return;if(document.activeElement instanceof HTMLElement&&![c,f,C].includes(document.activeElement))return;const K=ds.includes(r)?"nextElementSibling":"previousElementSibling";let $=document.activeElement;if($){for(let Q=0;Q<a.children.length;Q++){if($=$[K],!$)return;if($ instanceof HTMLButtonElement&&we($))break}$ instanceof HTMLButtonElement&&$.focus()}},vr=(r,a,c)=>{jt(a.allowEscapeKey)&&(r.preventDefault(),c($t.esc))};var Et={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const yi=()=>{Array.from(document.body.children).forEach(a=>{a.hasAttribute("data-previous-aria-hidden")?(a.setAttribute("aria-hidden",a.getAttribute("data-previous-aria-hidden")||""),a.removeAttribute("data-previous-aria-hidden")):a.removeAttribute("aria-hidden")})},hs=typeof window<"u"&&!!window.GestureEvent,Cr=()=>{const r=ae();if(!r)return;let a;r.ontouchstart=c=>{a=Er(c)},r.ontouchmove=c=>{a&&(c.preventDefault(),c.stopPropagation())}},Er=r=>{const a=r.target,c=ae(),f=Xe();return!(!c||!f||vi(r)||fs(r)||a!==c&&(re(c)||!(a instanceof HTMLElement)||"INPUT"===a.tagName||"TEXTAREA"===a.tagName||re(f)&&f.contains(a)))},vi=r=>r.touches&&r.touches.length&&"stylus"===r.touches[0].touchType,fs=r=>r.touches&&r.touches.length>1;let Zt=null;const gs=r=>{null===Zt&&(document.body.scrollHeight>window.innerHeight||"scroll"===r)&&(Zt=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight="".concat(Zt+(()=>{const r=document.createElement("div");r.className=v["scrollbar-measure"],document.body.appendChild(r);const a=r.getBoundingClientRect().width-r.clientWidth;return document.body.removeChild(r),a})(),"px"))};function bi(r,a,c,f){Je()?Y(r,f):(Ve(c).then(()=>Y(r,f)),cs(O)),hs?(a.setAttribute("style","display:none !important"),a.removeAttribute("class"),a.innerHTML=""):a.remove(),at()&&(null!==Zt&&(document.body.style.paddingRight="".concat(Zt,"px"),Zt=null),(()=>{if(Re(document.body,v.iosfix)){const r=parseInt(document.body.style.top,10);pe(document.body,v.iosfix),document.body.style.top="",document.body.scrollTop=-1*r}})(),yi()),function _s(){pe([document.documentElement,document.body],[v.shown,v["height-auto"],v["no-backdrop"],v["toast-shown"]])}()}function It(r){r=Yn(r);const a=Et.swalPromiseResolve.get(this),c=ws(this);this.isAwaitingPromise?r.isDismissed||(Xt(this),a(r)):c&&a(r)}const ws=r=>{const a=H();if(!a)return!1;const c=D.innerParams.get(r);if(!c||Re(a,c.hideClass.popup))return!1;pe(a,c.showClass.popup),W(a,c.hideClass.popup);const f=ae();return pe(f,c.showClass.backdrop),W(f,c.hideClass.backdrop),ys(r,a,c),!0};function Ci(r){const a=Et.swalPromiseReject.get(this);Xt(this),a&&a(r)}const Xt=r=>{r.isAwaitingPromise&&(delete r.isAwaitingPromise,D.innerParams.get(r)||r._destroy())},Yn=r=>typeof r>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},r),ys=(r,a,c)=>{const f=ae(),C=tt&&vt(a);"function"==typeof c.willClose&&c.willClose(a),C?vs(r,a,f,c.returnFocus,c.didClose):bi(r,f,c.returnFocus,c.didClose)},vs=(r,a,c,f,C)=>{tt&&(O.swalCloseEventFinishedCallback=bi.bind(null,r,c,f,C),a.addEventListener(tt,function(A){A.target===a&&(O.swalCloseEventFinishedCallback(),delete O.swalCloseEventFinishedCallback)}))},Y=(r,a)=>{setTimeout(()=>{"function"==typeof a&&a.bind(r.params)(),r._destroy&&r._destroy()})},U=r=>{let a=H();if(a||new ri,a=H(),!a)return;const c=_t();Je()?ce(Ze()):M(a,r),le(c),a.setAttribute("data-loading","true"),a.setAttribute("aria-busy","true"),a.focus()},M=(r,a)=>{const c=ze(),f=_t();!c||!f||(!a&&we(Pe())&&(a=Pe()),le(c),a&&(ce(a),f.setAttribute("data-button-to-replace",a.className),c.insertBefore(f,a)),W([r,c],v.loading))},Ei=r=>r.checked?1:0,Tr=r=>r.checked?r.value:null,vn=r=>r.files&&r.files.length?null!==r.getAttribute("multiple")?r.files:r.files[0]:null,bs=(r,a)=>{const c=H();if(!c)return;const f=C=>{"select"===a.input?function F(r,a,c){const f=Se(r,v.select);if(!f)return;const C=(A,K,$)=>{const Q=document.createElement("option");Q.value=$,de(Q,K),Q.selected=$n($,c.inputValue),A.appendChild(Q)};a.forEach(A=>{const K=A[0],$=A[1];if(Array.isArray($)){const Q=document.createElement("optgroup");Q.label=K,Q.disabled=!1,f.appendChild(Q),$.forEach(kt=>C(Q,kt[1],kt[0]))}else C(f,$,K)}),f.focus()}(c,Qn(C),a):"radio"===a.input&&function Ie(r,a,c){const f=Se(r,v.radio);if(!f)return;a.forEach(A=>{const K=A[0],$=A[1],Q=document.createElement("input"),kt=document.createElement("label");Q.type="radio",Q.name=v.radio,Q.value=K,$n(K,c.inputValue)&&(Q.checked=!0);const Bi=document.createElement("span");de(Bi,$),Bi.className=v.label,kt.appendChild(Q),kt.appendChild(Bi),f.appendChild(kt)});const C=f.querySelectorAll("input");C.length&&C[0].focus()}(c,Qn(C),a)};Gt(a.inputOptions)||Kt(a.inputOptions)?(U(Pe()),zt(a.inputOptions).then(C=>{r.hideLoading(),f(C)})):"object"==typeof a.inputOptions?f(a.inputOptions):He("Unexpected type of inputOptions! Expected object, Map or Promise, got ".concat(typeof a.inputOptions))},ee=(r,a)=>{const c=r.getInput();c&&(ce(c),zt(a.inputValue).then(f=>{c.value="".concat("number"===a.input?parseFloat(f)||0:f),le(c),c.focus(),r.hideLoading()}).catch(f=>{He("Error in inputValue promise: ".concat(f)),c.value="",le(c),c.focus(),r.hideLoading()}))};const Qn=r=>{const a=[];return r instanceof Map?r.forEach((c,f)=>{let C=c;"object"==typeof C&&(C=Qn(C)),a.push([f,C])}):Object.keys(r).forEach(c=>{let f=r[c];"object"==typeof f&&(f=Qn(f)),a.push([c,f])}),a},$n=(r,a)=>!!a&&a.toString()===r.toString(),Cs=(r,a)=>{const c=D.innerParams.get(r);if(!c.input)return void He('The "input" parameter is needed to be set when using returnInputValueOn'.concat(Nt(a)));const f=r.getInput(),C=((r,a)=>{const c=r.getInput();if(!c)return null;switch(a.input){case"checkbox":return Ei(c);case"radio":return Tr(c);case"file":return vn(c);default:return a.inputAutoTrim?c.value.trim():c.value}})(r,c);c.inputValidator?Es(r,C,a):f&&!f.checkValidity()?(r.enableButtons(),r.showValidationMessage(c.validationMessage)):"deny"===a?ct(r,C):Ii(r,C)},Es=(r,a,c)=>{const f=D.innerParams.get(r);r.disableInput(),Promise.resolve().then(()=>zt(f.inputValidator(a,f.validationMessage))).then(A=>{r.enableButtons(),r.enableInput(),A?r.showValidationMessage(A):"deny"===c?ct(r,a):Ii(r,a)})},ct=(r,a)=>{const c=D.innerParams.get(r||void 0);c.showLoaderOnDeny&&U(Ge()),c.preDeny?(r.isAwaitingPromise=!0,Promise.resolve().then(()=>zt(c.preDeny(a,c.validationMessage))).then(C=>{!1===C?(r.hideLoading(),Xt(r)):r.close({isDenied:!0,value:typeof C>"u"?a:C})}).catch(C=>Jt(r||void 0,C))):r.close({isDenied:!0,value:a})},qn=(r,a)=>{r.close({isConfirmed:!0,value:a})},Jt=(r,a)=>{r.rejectPromise(a)},Ii=(r,a)=>{const c=D.innerParams.get(r||void 0);c.showLoaderOnConfirm&&U(),c.preConfirm?(r.resetValidationMessage(),r.isAwaitingPromise=!0,Promise.resolve().then(()=>zt(c.preConfirm(a,c.validationMessage))).then(C=>{we(Dt())||!1===C?(r.hideLoading(),Xt(r)):qn(r,typeof C>"u"?a:C)}).catch(C=>Jt(r||void 0,C))):qn(r,a)};function bn(){const r=D.innerParams.get(this);if(!r)return;const a=D.domCache.get(this);ce(a.loader),Je()?r.icon&&le(Ze()):kr(a),pe([a.popup,a.actions],v.loading),a.popup.removeAttribute("aria-busy"),a.popup.removeAttribute("data-loading"),a.confirmButton.disabled=!1,a.denyButton.disabled=!1,a.cancelButton.disabled=!1}const kr=r=>{const a=r.popup.getElementsByClassName(r.loader.getAttribute("data-button-to-replace"));a.length?le(a[0],"inline-block"):!we(Pe())&&!we(Ge())&&!we(ot())&&ce(r.actions)};function Is(){const r=D.innerParams.get(this),a=D.domCache.get(this);return a?Lt(a.popup,r.input):null}function Ts(r,a,c){const f=D.domCache.get(r);a.forEach(C=>{f[C].disabled=c})}function Ti(r,a){const c=H();if(c&&r)if("radio"===r.type){const f=c.querySelectorAll('[name="'.concat(v.radio,'"]'));for(let C=0;C<f.length;C++)f[C].disabled=a}else r.disabled=a}function St(){Ts(this,["confirmButton","denyButton","cancelButton"],!1)}function B(){Ts(this,["confirmButton","denyButton","cancelButton"],!0)}function Cn(){Ti(this.getInput(),!1)}function En(){Ti(this.getInput(),!0)}function Si(r){const a=D.domCache.get(this),c=D.innerParams.get(this);de(a.validationMessage,r),a.validationMessage.className=v["validation-message"],c.customClass&&c.customClass.validationMessage&&W(a.validationMessage,c.customClass.validationMessage),le(a.validationMessage);const f=this.getInput();f&&(f.setAttribute("aria-invalid","true"),f.setAttribute("aria-describedby",v["validation-message"]),be(f),W(f,v.inputerror))}function Ke(){const r=D.domCache.get(this);r.validationMessage&&ce(r.validationMessage);const a=this.getInput();a&&(a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby"),pe(a,v.inputerror))}const ut={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},Ye=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],xr={},xe=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ss=r=>Object.prototype.hasOwnProperty.call(ut,r),Zn=r=>-1!==Ye.indexOf(r),Xn=r=>xr[r],Pr=r=>{Ss(r)||_e('Unknown parameter "'.concat(r,'"'))},As=r=>{xe.includes(r)&&_e('The parameter "'.concat(r,'" is incompatible with toasts'))},ks=r=>{const a=Xn(r);a&&Me(r,a)};function Bt(r){const a=H(),c=D.innerParams.get(this);if(!a||Re(a,c.hideClass.popup))return void _e("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const f=Ps(r),C=Object.assign({},c,f);_i(this,C),D.innerParams.set(this,C),Object.defineProperties(this,{params:{value:Object.assign({},this.params,r),writable:!1,enumerable:!0}})}const Ps=r=>{const a={};return Object.keys(r).forEach(c=>{Zn(c)?a[c]=r[c]:_e("Invalid parameter to update: ".concat(c))}),a};function Ai(){const r=D.domCache.get(this),a=D.innerParams.get(this);a?(r.popup&&O.swalCloseEventFinishedCallback&&(O.swalCloseEventFinishedCallback(),delete O.swalCloseEventFinishedCallback),"function"==typeof a.didDestroy&&a.didDestroy(),Rr(this)):Rs(this)}const Rr=r=>{Rs(r),delete r.params,delete O.keydownHandler,delete O.keydownTarget,delete O.currentInstance},Rs=r=>{r.isAwaitingPromise?(ki(D,r),r.isAwaitingPromise=!0):(ki(Et,r),ki(D,r),delete r.isAwaitingPromise,delete r.disableButtons,delete r.enableButtons,delete r.getInput,delete r.disableInput,delete r.enableInput,delete r.hideLoading,delete r.disableLoading,delete r.showValidationMessage,delete r.resetValidationMessage,delete r.close,delete r.closePopup,delete r.closeModal,delete r.closeToast,delete r.rejectPromise,delete r.update,delete r._destroy)},ki=(r,a)=>{for(const c in r)r[c].delete(a)};var Z=Object.freeze({__proto__:null,_destroy:Ai,close:It,closeModal:It,closePopup:It,closeToast:It,disableButtons:B,disableInput:En,disableLoading:bn,enableButtons:St,enableInput:Cn,getInput:Is,handleAwaitingPromise:Xt,hideLoading:bn,rejectPromise:Ci,resetValidationMessage:Ke,showValidationMessage:Si,update:Bt});const Dr=(r,a,c)=>{a.popup.onclick=()=>{r&&(Jn(r)||r.timer||r.input)||c($t.close)}},Jn=r=>!!(r.showConfirmButton||r.showDenyButton||r.showCancelButton||r.showCloseButton);let en=!1;const tn=r=>{r.popup.onmousedown=()=>{r.container.onmouseup=function(a){r.container.onmouseup=()=>{},a.target===r.container&&(en=!0)}}},dt=r=>{r.container.onmousedown=()=>{r.popup.onmouseup=function(a){r.popup.onmouseup=()=>{},(a.target===r.popup||a.target instanceof HTMLElement&&r.popup.contains(a.target))&&(en=!0)}}},In=(r,a,c)=>{a.container.onclick=f=>{en?en=!1:f.target===a.container&&jt(r.allowOutsideClick)&&c($t.backdrop)}},Ns=r=>r instanceof Element||(r=>"object"==typeof r&&r.jquery)(r);const Ds=()=>{if(O.timeout)return(()=>{const r=Ot();if(!r)return;const a=parseInt(window.getComputedStyle(r).width);r.style.removeProperty("transition"),r.style.width="100%";const c=parseInt(window.getComputedStyle(r).width);r.style.width="".concat(a/c*100,"%")})(),O.timeout.stop()},ei=()=>{if(O.timeout){const r=O.timeout.start();return bt(r),r}};let sn=!1;const Pi={};const An=r=>{for(let a=r.target;a&&a!==document;a=a.parentNode)for(const c in Pi){const f=a.getAttribute(c);if(f)return void Pi[c].fire({template:f})}};var Lr=Object.freeze({__proto__:null,argsToParams:r=>{const a={};return"object"!=typeof r[0]||Ns(r[0])?["title","html","icon"].forEach((c,f)=>{const C=r[f];"string"==typeof C||Ns(C)?a[c]=C:void 0!==C&&He("Unexpected type of ".concat(c,'! Expected "string" or "Element", got ').concat(typeof C))}):Object.assign(a,r[0]),a},bindClickHandler:function Ri(){Pi[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data-swal-template"]=this,sn||(document.body.addEventListener("click",An),sn=!0)},clickCancel:()=>{var r;return null===(r=ot())||void 0===r?void 0:r.click()},clickConfirm:ls,clickDeny:()=>{var r;return null===(r=Ge())||void 0===r?void 0:r.click()},enableLoading:U,fire:function Or(){for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];return new this(...c)},getActions:ze,getCancelButton:ot,getCloseButton:mn,getConfirmButton:Pe,getContainer:ae,getDenyButton:Ge,getFocusableElements:_n,getFooter:Bn,getHtmlContainer:Xe,getIcon:Ze,getIconContent:()=>ve(v["icon-content"]),getImage:di,getInputLabel:()=>ve(v["input-label"]),getLoader:_t,getPopup:H,getProgressSteps:gn,getTimerLeft:()=>O.timeout&&O.timeout.getTimerLeft(),getTimerProgressBar:Ot,getTitle:pn,getValidationMessage:Dt,increaseTimer:r=>{if(O.timeout){const a=O.timeout.increase(r);return bt(a,!0),a}},isDeprecatedParameter:Xn,isLoading:()=>{const r=H();return!!r&&r.hasAttribute("data-loading")},isTimerRunning:()=>!(!O.timeout||!O.timeout.isRunning()),isUpdatableParameter:Zn,isValidParameter:Ss,isVisible:()=>we(H()),mixin:function ne(r){return class a extends(this){_main(f,C){return super._main(f,Object.assign({},r,C))}}},resumeTimer:ei,showLoading:U,stopTimer:Ds,toggleTimer:()=>{const r=O.timeout;return r&&(r.running?Ds():ei())}});class ti{constructor(a,c){this.callback=a,this.remaining=c,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(a){const c=this.running;return c&&this.stop(),this.remaining+=a,c&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const Ls=["swal-title","swal-html","swal-footer"],Fr=r=>{const a={};return Array.from(r.querySelectorAll("swal-param")).forEach(f=>{nt(f,["name","value"]);const C=f.getAttribute("name"),A=f.getAttribute("value");a[C]="boolean"==typeof ut[C]?"false"!==A:"object"==typeof ut[C]?JSON.parse(A):A}),a},Ni=r=>{const a={};return Array.from(r.querySelectorAll("swal-function-param")).forEach(f=>{const C=f.getAttribute("name"),A=f.getAttribute("value");a[C]=new Function("return ".concat(A))()}),a},Br=r=>{const a={};return Array.from(r.querySelectorAll("swal-button")).forEach(f=>{nt(f,["type","color","aria-label"]);const C=f.getAttribute("type");a["".concat(C,"ButtonText")]=f.innerHTML,a["show".concat(Nt(C),"Button")]=!0,f.hasAttribute("color")&&(a["".concat(C,"ButtonColor")]=f.getAttribute("color")),f.hasAttribute("aria-label")&&(a["".concat(C,"ButtonAriaLabel")]=f.getAttribute("aria-label"))}),a},Di=r=>{const a={},c=r.querySelector("swal-image");return c&&(nt(c,["src","width","height","alt"]),c.hasAttribute("src")&&(a.imageUrl=c.getAttribute("src")),c.hasAttribute("width")&&(a.imageWidth=c.getAttribute("width")),c.hasAttribute("height")&&(a.imageHeight=c.getAttribute("height")),c.hasAttribute("alt")&&(a.imageAlt=c.getAttribute("alt"))),a},Wr=r=>{const a={},c=r.querySelector("swal-icon");return c&&(nt(c,["type","color"]),c.hasAttribute("type")&&(a.icon=c.getAttribute("type")),c.hasAttribute("color")&&(a.iconColor=c.getAttribute("color")),a.iconHtml=c.innerHTML),a},ni=r=>{const a={},c=r.querySelector("swal-input");c&&(nt(c,["type","label","placeholder","value"]),a.input=c.getAttribute("type")||"text",c.hasAttribute("label")&&(a.inputLabel=c.getAttribute("label")),c.hasAttribute("placeholder")&&(a.inputPlaceholder=c.getAttribute("placeholder")),c.hasAttribute("value")&&(a.inputValue=c.getAttribute("value")));const f=Array.from(r.querySelectorAll("swal-input-option"));return f.length&&(a.inputOptions={},f.forEach(C=>{nt(C,["value"]);const A=C.getAttribute("value");a.inputOptions[A]=C.innerHTML})),a},Ms=(r,a)=>{const c={};for(const f in a){const C=a[f],A=r.querySelector(C);A&&(nt(A,[]),c[C.replace(/^swal-/,"")]=A.innerHTML.trim())}return c},Fs=r=>{const a=Ls.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(r.children).forEach(c=>{const f=c.tagName.toLowerCase();a.includes(f)||_e("Unrecognized element <".concat(f,">"))})},nt=(r,a)=>{Array.from(r.attributes).forEach(c=>{-1===a.indexOf(c.name)&&_e(['Unrecognized attribute "'.concat(c.name,'" on <').concat(r.tagName.toLowerCase(),">."),"".concat(a.length?"Allowed attributes are: ".concat(a.join(", ")):"To set the value, use HTML within the element.")])})},ii=r=>{const a=ae(),c=H();"function"==typeof r.willOpen&&r.willOpen(c);const C=window.getComputedStyle(document.body).overflowY;Ur(a,c,r),setTimeout(()=>{Oi(a,c)},10),at()&&(Li(a,r.scrollbarPadding,C),Array.from(document.body.children).forEach(a=>{a===ae()||a.contains(ae())||(a.hasAttribute("aria-hidden")&&a.setAttribute("data-previous-aria-hidden",a.getAttribute("aria-hidden")||""),a.setAttribute("aria-hidden","true"))})),!Je()&&!O.previousActiveElement&&(O.previousActiveElement=document.activeElement),"function"==typeof r.didOpen&&setTimeout(()=>r.didOpen(c)),pe(a,v["no-transition"])},Wt=r=>{const a=H();if(r.target!==a||!tt)return;const c=ae();a.removeEventListener(tt,Wt),c.style.overflowY="auto"},Oi=(r,a)=>{tt&&vt(a)?(r.style.overflowY="hidden",a.addEventListener(tt,Wt)):r.style.overflowY="auto"},Li=(r,a,c)=>{(()=>{if(hs&&!Re(document.body,v.iosfix)){const r=document.body.scrollTop;document.body.style.top="".concat(-1*r,"px"),W(document.body,v.iosfix),Cr()}})(),a&&"hidden"!==c&&gs(c),setTimeout(()=>{r.scrollTop=0})},Ur=(r,a,c)=>{W(r,c.showClass.backdrop),a.style.setProperty("opacity","0","important"),le(a,"grid"),setTimeout(()=>{W(a,c.showClass.popup),a.style.removeProperty("opacity")},10),W([document.documentElement,document.body],v.shown),c.heightAuto&&c.backdrop&&!c.toast&&W([document.documentElement,document.body],v["height-auto"])};var Ws={email:(r,a)=>/^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]{2,24}$/.test(r)?Promise.resolve():Promise.resolve(a||"Invalid email address"),url:(r,a)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(r)?Promise.resolve():Promise.resolve(a||"Invalid URL")};function Hr(r){(function Us(r){r.inputValidator||("email"===r.input&&(r.inputValidator=Ws.email),"url"===r.input&&(r.inputValidator=Ws.url))})(r),r.showLoaderOnConfirm&&!r.preConfirm&&_e("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function Vr(r){(!r.target||"string"==typeof r.target&&!document.querySelector(r.target)||"string"!=typeof r.target&&!r.target.appendChild)&&(_e('Target parameter is not valid, defaulting to "body"'),r.target="body")}(r),"string"==typeof r.title&&(r.title=r.title.split("\n").join("<br />")),lt(r)}let it;var Ne=new WeakMap;class ie{constructor(){if(On(this,Ne,{writable:!0,value:void 0}),typeof window>"u")return;it=this;for(var a=arguments.length,c=new Array(a),f=0;f<a;f++)c[f]=arguments[f];const C=Object.freeze(this.constructor.argsToParams(c));this.params=C,this.isAwaitingPromise=!1,x(this,Ne,this._main(it.params))}_main(a){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(r=>{!1===r.backdrop&&r.allowOutsideClick&&_e('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const a in r)Pr(a),r.toast&&As(a),ks(a)})(Object.assign({},c,a)),O.currentInstance&&(O.currentInstance._destroy(),at()&&yi()),O.currentInstance=it;const f=Fi(a,c);Hr(f),Object.freeze(f),O.timeout&&(O.timeout.stop(),delete O.timeout),clearTimeout(O.restoreFocusTimeout);const C=si(it);return _i(it,f),D.innerParams.set(it,f),Mi(it,C,f)}then(a){return gt(this,Ne).then(a)}finally(a){return gt(this,Ne).finally(a)}}const Mi=(r,a,c)=>new Promise((f,C)=>{const A=K=>{r.close({isDismissed:!0,dismiss:K})};Et.swalPromiseResolve.set(r,f),Et.swalPromiseReject.set(r,C),a.confirmButton.onclick=()=>{(r=>{const a=D.innerParams.get(r);r.disableButtons(),a.input?Cs(r,"confirm"):Ii(r,!0)})(r)},a.denyButton.onclick=()=>{(r=>{const a=D.innerParams.get(r);r.disableButtons(),a.returnInputValueOnDeny?Cs(r,"deny"):ct(r,!1)})(r)},a.cancelButton.onclick=()=>{((r,a)=>{r.disableButtons(),a($t.cancel)})(r,A)},a.closeButton.onclick=()=>{A($t.close)},((r,a,c)=>{r.toast?Dr(r,a,c):(tn(a),dt(a),In(r,a,c))})(c,a,A),((r,a,c)=>{cs(r),a.toast||(r.keydownHandler=f=>wr(a,f,c),r.keydownTarget=a.keydownListenerCapture?window:H(),r.keydownListenerCapture=a.keydownListenerCapture,r.keydownTarget.addEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!0)})(O,c,A),((r,a)=>{"select"===a.input||"radio"===a.input?bs(r,a):["text","email","number","tel","textarea"].some(c=>c===a.input)&&(Gt(a.inputValue)||Kt(a.inputValue))&&(U(Pe()),ee(r,a))})(r,c),ii(c),kn(O,c,A),Ut(a,c),setTimeout(()=>{a.container.scrollTop=0})}),Fi=(r,a)=>{const c=(r=>{const a="string"==typeof r.template?document.querySelector(r.template):r.template;if(!a)return{};const c=a.content;return Fs(c),Object.assign(Fr(c),Ni(c),Br(c),Di(c),Wr(c),ni(c),Ms(c,Ls))})(r),f=Object.assign({},ut,a,c,r);return f.showClass=Object.assign({},ut.showClass,f.showClass),f.hideClass=Object.assign({},ut.hideClass,f.hideClass),f},si=r=>{const a={popup:H(),container:ae(),actions:ze(),confirmButton:Pe(),denyButton:Ge(),cancelButton:ot(),loader:_t(),closeButton:mn(),validationMessage:Dt(),progressSteps:gn()};return D.domCache.set(r,a),a},kn=(r,a,c)=>{const f=Ot();ce(f),a.timer&&(r.timeout=new ti(()=>{c("timer"),delete r.timeout},a.timer),a.timerProgressBar&&(le(f),fe(f,a,"timerProgressBar"),setTimeout(()=>{r.timeout&&r.timeout.running&&bt(a.timer)})))},Ut=(r,a)=>{if(!a.toast){if(!jt(a.allowEnterKey))return void At();rn(r,a)||Kn(-1,1)}},rn=(r,a)=>a.focusDeny&&we(r.denyButton)?(r.denyButton.focus(),!0):a.focusCancel&&we(r.cancelButton)?(r.cancelButton.focus(),!0):!(!a.focusConfirm||!we(r.confirmButton)||(r.confirmButton.focus(),0)),At=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const r=new Date,a=localStorage.getItem("swal-initiation");a?(r.getTime()-Date.parse(a))/864e5>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const c=document.createElement("audio");c.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",c.loop=!0,document.body.appendChild(c),setTimeout(()=>{c.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation","".concat(r))}ie.prototype.disableButtons=B,ie.prototype.enableButtons=St,ie.prototype.getInput=Is,ie.prototype.disableInput=En,ie.prototype.enableInput=Cn,ie.prototype.hideLoading=bn,ie.prototype.disableLoading=bn,ie.prototype.showValidationMessage=Si,ie.prototype.resetValidationMessage=Ke,ie.prototype.close=It,ie.prototype.closePopup=It,ie.prototype.closeModal=It,ie.prototype.closeToast=It,ie.prototype.rejectPromise=Ci,ie.prototype.update=Bt,ie.prototype._destroy=Ai,Object.assign(ie,Lr),Object.keys(Z).forEach(r=>{ie[r]=function(){return it&&it[r]?it[r](...arguments):null}}),ie.DismissReason=$t,ie.version="11.7.32";const ri=ie;return ri.default=ri,ri}(),typeof this<"u"&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),typeof document<"u"&&function(gt,x){var R=gt.createElement("style");if(gt.getElementsByTagName("head")[0].appendChild(R),R.styleSheet)R.styleSheet.disabled||(R.styleSheet.cssText=x);else try{R.innerHTML=x}catch{R.innerText=x}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;transform:rotate(45deg);border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;align-self:start;justify-self:center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;align-self:start;justify-self:end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;align-self:center;justify-self:center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;align-self:center;justify-self:end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;justify-self:center;align-self:end}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;align-self:end;justify-self:end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm:focus{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny{border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-deny:focus{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel{border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled).swal2-cancel:focus{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:1em 1.6em .3em;padding:0;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;transform:rotate(45deg);border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')},8661:(ar,gt,x)=>{"use strict";x.r(gt);var R=x(5861),P=x(3399),y=x(6710),J=x(9058),O=(x(7592),x(7879),x(4537));function Oe(){return window}function Ln(){return Ln=(0,R.Z)(function*(w,m,g){var I;const{BuildInfo:T}=Oe();(0,y.as)(m.sessionId,"AuthEvent did not contain a session ID");const L=yield function He(w){return Ht.apply(this,arguments)}(m.sessionId),j={};return(0,y.at)()?j.ibi=T.packageName:(0,y.au)()?j.apn=T.packageName:(0,y.av)(w,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=L,(0,y.aw)(w,g,m.type,void 0,null!==(I=m.eventId)&&void 0!==I?I:void 0,j)}),Ln.apply(this,arguments)}function fn(){return(fn=(0,R.Z)(function*(w){const{BuildInfo:m}=Oe(),g={};(0,y.at)()?g.iosBundleId=m.packageName:(0,y.au)()?g.androidPackageName=m.packageName:(0,y.av)(w,"operation-not-supported-in-this-environment"),yield(0,y.ax)(w,g)})).apply(this,arguments)}function Nt(){return(Nt=(0,R.Z)(function*(w,m,g){const{cordova:I}=Oe();let T=()=>{};try{yield new Promise((L,j)=>{let G=null;function ge(){var z;L();const ke=null===(z=I.plugins.browsertab)||void 0===z?void 0:z.close;"function"==typeof ke&&ke(),"function"==typeof g?.close&&g.close()}function D(){G||(G=window.setTimeout(()=>{j((0,y.az)(w,"redirect-cancelled-by-user"))},2e3))}function Be(){"visible"===document?.visibilityState&&D()}m.addPassiveListener(ge),document.addEventListener("resume",D,!1),(0,y.au)()&&document.addEventListener("visibilitychange",Be,!1),T=()=>{m.removePassiveListener(ge),document.removeEventListener("resume",D,!1),document.removeEventListener("visibilitychange",Be,!1),G&&window.clearTimeout(G)}})}finally{T()}})).apply(this,arguments)}function Ht(){return(Ht=(0,R.Z)(function*(w){const m=function je(w){if((0,y.as)(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(w);const m=new ArrayBuffer(w.length),g=new Uint8Array(m);for(let I=0;I<w.length;I++)g[I]=w.charCodeAt(I);return g}(w),g=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class jt extends y.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(m)),super.onEvent(m)}initialized(){var m=this;return(0,R.Z)(function*(){yield m.initPromise})()}}function Kt(w){return ae.apply(this,arguments)}function ae(){return(ae=(0,R.Z)(function*(w){const m=yield H()._get(Ze(w));return m&&(yield H()._remove(Ze(w))),m})).apply(this,arguments)}function ve(){const w=[];for(let g=0;g<20;g++){const I=Math.floor(62*Math.random());w.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(I))}return w.join("")}function H(){return(0,y.aC)(y.b)}function Ze(w){return(0,y.aD)("authEvent",w.config.apiKey,w.name)}function Xe(w){if(!w?.includes("?"))return{};const[m,...g]=w.split("?");return(0,J.zd)(g.join("?"))}const Dt=class gn{constructor(){this._redirectPersistence=y.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=y.aE,this._overrideRedirectResult=y.aF}_initialize(m){var g=this;return(0,R.Z)(function*(){const I=m._key();let T=g.eventManagers.get(I);return T||(T=new jt(m),g.eventManagers.set(I,T),g.attachCallbackListeners(m,T)),T})()}_openPopup(m){(0,y.av)(m,"operation-not-supported-in-this-environment")}_openRedirect(m,g,I,T){var L=this;return(0,R.Z)(function*(){!function _e(w){var m,g,I,T,L,j,G,ge,D,Be;const z=Oe();(0,y.aA)("function"==typeof(null===(m=z?.universalLinks)||void 0===m?void 0:m.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,y.aA)(typeof(null===(g=z?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,y.aA)("function"==typeof(null===(L=null===(T=null===(I=z?.cordova)||void 0===I?void 0:I.plugins)||void 0===T?void 0:T.browsertab)||void 0===L?void 0:L.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,y.aA)("function"==typeof(null===(ge=null===(G=null===(j=z?.cordova)||void 0===j?void 0:j.plugins)||void 0===G?void 0:G.browsertab)||void 0===ge?void 0:ge.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,y.aA)("function"==typeof(null===(Be=null===(D=z?.cordova)||void 0===D?void 0:D.InAppBrowser)||void 0===Be?void 0:Be.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const j=yield L._initialize(m);yield j.initialized(),j.resetRedirect(),(0,y.aG)(),yield L._originValidation(m);const G=function Gt(w,m,g=null){return{type:m,eventId:g,urlResponse:null,sessionId:ve(),postBody:null,tenantId:w.tenantId,error:(0,y.az)(w,"no-auth-event")}}(m,I,T);yield function zt(w,m){return H()._set(Ze(w),m)}(m,G);const ge=yield function Le(w,m,g){return Ln.apply(this,arguments)}(m,G,g),D=yield function Rt(w){const{cordova:m}=Oe();return new Promise(g=>{m.plugins.browsertab.isAvailable(I=>{let T=null;I?m.plugins.browsertab.openUrl(w):T=m.InAppBrowser.open(w,(0,y.ay)()?"_blank":"_system","location=yes"),g(T)})})}(ge);return function Mn(w,m,g){return Nt.apply(this,arguments)}(m,j,D)})()}_isIframeWebStorageSupported(m,g){throw new Error("Method not implemented.")}_originValidation(m){const g=m._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function v(w){return fn.apply(this,arguments)}(m)),this.originValidationPromises[g]}attachCallbackListeners(m,g){const{universalLinks:I,handleOpenURL:T,BuildInfo:L}=Oe(),j=setTimeout((0,R.Z)(function*(){yield Kt(m),g.onEvent(Pe())}),500),G=function(){var Be=(0,R.Z)(function*(z){clearTimeout(j);const ke=yield Kt(m);let Ft=null;ke&&z?.url&&(Ft=function mt(w,m){var g,I;const T=function pn(w){const m=Xe(w),g=m.link?decodeURIComponent(m.link):void 0,I=Xe(g).link,T=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Xe(T).link||T||I||g||w}(m);if(T.includes("/__/auth/callback")){const L=Xe(T),j=L.firebaseError?function Fn(w){try{return JSON.parse(w)}catch{return null}}(decodeURIComponent(L.firebaseError)):null,G=null===(I=null===(g=j?.code)||void 0===g?void 0:g.split("auth/"))||void 0===I?void 0:I[1],ge=G?(0,y.az)(G):null;return ge?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:ge,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:T,postBody:null}}return null}(ke,z.url)),g.onEvent(Ft||Pe())});return function(ke){return Be.apply(this,arguments)}}();typeof I<"u"&&"function"==typeof I.subscribe&&I.subscribe(null,G);const ge=T,D=`${L.packageName.toLowerCase()}://`;Oe().handleOpenURL=function(){var Be=(0,R.Z)(function*(z){if(z.toLowerCase().startsWith(D)&&G({url:z}),"function"==typeof ge)try{ge(z)}catch(ke){console.error(ke)}});return function(z){return Be.apply(this,arguments)}}()}};function Pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,y.az)("no-auth-event")}}function ze(){var w;return(null===(w=self?.location)||void 0===w?void 0:w.protocol)||null}function Ot(w=(0,J.z$)()){return!("file:"!==ze()&&"ionic:"!==ze()&&"capacitor:"!==ze()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Je(){try{const w=self.localStorage,m=y.aL();if(w)return w.setItem(m,"1"),w.removeItem(m),!function at(w=(0,J.z$)()){return function Ji(){return(0,J.w1)()&&11===document?.documentMode}()||function _n(w=(0,J.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,J.hl)()}catch{return h()&&(0,J.hl)()}return!1}function h(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function de(){return(function Bn(){return"http:"===ze()||"https:"===ze()}()||(0,J.ru)()||Ot())&&!function mn(){return(0,J.b$)()||(0,J.UG)()}()&&Je()&&!h()}function Re(){return Ot()&&typeof document<"u"}function fe(){return(fe=(0,R.Z)(function*(){return!!Re()&&new Promise(w=>{const m=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),w(!0)})})})).apply(this,arguments)}const be={LOCAL:"local",NONE:"none",SESSION:"session"},wt=y.aA,W="persistence";function Se(w){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,R.Z)(function*(w){yield w._initializationPromise;const m=ce(),g=y.aD(W,w.config.apiKey,w.name);m&&m.setItem(g,w._getPersistence())})).apply(this,arguments)}function ce(){var w;try{return(null===(w=function Lt(){return typeof window<"u"?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch{return null}}const yt=y.aA;class he{constructor(){this.browserResolver=y.aC(y.k),this.cordovaResolver=y.aC(Dt),this.underlyingResolver=null,this._redirectPersistence=y.a,this._completeRedirectFn=y.aE,this._overrideRedirectResult=y.aF}_initialize(m){var g=this;return(0,R.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,g,I,T){var L=this;return(0,R.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openPopup(m,g,I,T)})()}_openRedirect(m,g,I,T){var L=this;return(0,R.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._openRedirect(m,g,I,T)})()}_isIframeWebStorageSupported(m,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,g)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Re()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,R.Z)(function*(){if(m.underlyingResolver)return;const g=yield function Wn(){return fe.apply(this,arguments)}();m.underlyingResolver=g?m.cordovaResolver:m.browserResolver})()}}function we(w){return w.unwrap()}function re(w){return bt(w)}function bt(w){const{_tokenResponse:m}=w instanceof J.ZR?w.customData:w;if(!m)return null;if(!(w instanceof J.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return y.P.credentialFromResult(w);const g=m.providerId;if(!g||g===y.p.PASSWORD)return null;let I;switch(g){case y.p.GOOGLE:I=y.V;break;case y.p.FACEBOOK:I=y.U;break;case y.p.GITHUB:I=y.W;break;case y.p.TWITTER:I=y.Z;break;default:const{oauthIdToken:T,oauthAccessToken:L,oauthTokenSecret:j,pendingToken:G,nonce:ge}=m;return L||j||T||G?G?g.startsWith("saml.")?y.aO._create(g,G):y.L._fromParams({providerId:g,signInMethod:g,pendingToken:G,idToken:T,accessToken:L}):new y.X(g).credential({idToken:T,accessToken:L,rawNonce:ge}):null}return w instanceof J.ZR?I.credentialFromError(w):I.credentialFromResult(w)}function X(w,m){return m.catch(g=>{throw g instanceof J.ZR&&function vt(w,m){var g;const I=null===(g=m.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===m?.code)m.resolver=new Yt(w,y.aq(w,m));else if(I){const T=bt(m),L=m;T&&(L.credential=T,L.tenantId=I.tenantId||void 0,L.email=I.email||void 0,L.phoneNumber=I.phoneNumber||void 0)}}(w,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:re(g),additionalUserInfo:y.ao(g),user:ye.getOrCreate(T)}})}function oe(w,m){return wn.apply(this,arguments)}function wn(){return(wn=(0,R.Z)(function*(w,m){const g=yield m;return{verificationId:g.verificationId,confirm:I=>X(w,g.confirm(I))}})).apply(this,arguments)}class Yt{constructor(m,g){this.resolver=g,this.auth=function Un(w){return w.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return X(we(this.auth),this.resolver.resolveSignIn(m))}}class ye{constructor(m){this._delegate=m,this.multiFactor=y.ar(m)}static getOrCreate(m){return ye.USER_MAP.has(m)||ye.USER_MAP.set(m,new ye(m)),ye.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var g=this;return(0,R.Z)(function*(){return X(g.auth,y.a0(g._delegate,m))})()}linkWithPhoneNumber(m,g){var I=this;return(0,R.Z)(function*(){return oe(I.auth,y.l(I._delegate,m,g))})()}linkWithPopup(m){var g=this;return(0,R.Z)(function*(){return X(g.auth,y.d(g._delegate,m,he))})()}linkWithRedirect(m){var g=this;return(0,R.Z)(function*(){return yield Se(y.aH(g.auth)),y.g(g._delegate,m,he)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var g=this;return(0,R.Z)(function*(){return X(g.auth,y.a1(g._delegate,m))})()}reauthenticateWithPhoneNumber(m,g){return oe(this.auth,y.r(this._delegate,m,g))}reauthenticateWithPopup(m){return X(this.auth,y.e(this._delegate,m,he))}reauthenticateWithRedirect(m){var g=this;return(0,R.Z)(function*(){return yield Se(y.aH(g.auth)),y.h(g._delegate,m,he)})()}sendEmailVerification(m){return y.ae(this._delegate,m)}unlink(m){var g=this;return(0,R.Z)(function*(){return yield y.an(g._delegate,m),g})()}updateEmail(m){return y.aj(this._delegate,m)}updatePassword(m){return y.ak(this._delegate,m)}updatePhoneNumber(m){return y.u(this._delegate,m)}updateProfile(m){return y.ai(this._delegate,m)}verifyBeforeUpdateEmail(m,g){return y.af(this._delegate,m,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ye.USER_MAP=new WeakMap;const Ae=y.aA;let Fe=(()=>{class w{constructor(g,I){if(this.app=g,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ae(T,"invalid-api-key",{appName:g.name}),Ae(T,"invalid-api-key",{appName:g.name});const L=typeof window<"u"?he:void 0;this._delegate=I.initialize({options:{persistence:fi(T,g.name),popupRedirectResolver:L}}),this._delegate._updateErrorMap(y.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ye.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,I){y.I(this._delegate,g,I)}applyActionCode(g){return y.a5(this._delegate,g)}checkActionCode(g){return y.a6(this._delegate,g)}confirmPasswordReset(g,I){return y.a4(this._delegate,g,I)}createUserWithEmailAndPassword(g,I){var T=this;return(0,R.Z)(function*(){return X(T._delegate,y.a8(T._delegate,g,I))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return y.ad(this._delegate,g)}isSignInWithEmailLink(g){return y.ab(this._delegate,g)}getRedirectResult(){var g=this;return(0,R.Z)(function*(){Ae(de(),g._delegate,"operation-not-supported-in-this-environment");const I=yield y.j(g._delegate,he);return I?X(g._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function ot(w,m){(0,y.aH)(w)._logFramework(m)}(this._delegate,g)}onAuthStateChanged(g,I,T){const{next:L,error:j,complete:G}=et(g,I,T);return this._delegate.onAuthStateChanged(L,j,G)}onIdTokenChanged(g,I,T){const{next:L,error:j,complete:G}=et(g,I,T);return this._delegate.onIdTokenChanged(L,j,G)}sendSignInLinkToEmail(g,I){return y.aa(this._delegate,g,I)}sendPasswordResetEmail(g,I){return y.a3(this._delegate,g,I||void 0)}setPersistence(g){var I=this;return(0,R.Z)(function*(){let T;switch(function pe(w,m){wt(Object.values(be).includes(m),w,"invalid-persistence-type"),(0,J.b$)()?wt(m!==be.SESSION,w,"unsupported-persistence-type"):(0,J.UG)()?wt(m===be.NONE,w,"unsupported-persistence-type"):h()?wt(m===be.NONE||m===be.LOCAL&&(0,J.hl)(),w,"unsupported-persistence-type"):wt(m===be.NONE||Je(),w,"unsupported-persistence-type")}(I._delegate,g),g){case be.SESSION:T=y.a;break;case be.LOCAL:T=(yield y.aC(y.i)._isAvailable())?y.i:y.b;break;case be.NONE:T=y.N;break;default:return y.av("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return X(this._delegate,y._(this._delegate))}signInWithCredential(g){return X(this._delegate,y.$(this._delegate,g))}signInWithCustomToken(g){return X(this._delegate,y.a2(this._delegate,g))}signInWithEmailAndPassword(g,I){return X(this._delegate,y.a9(this._delegate,g,I))}signInWithEmailLink(g,I){return X(this._delegate,y.ac(this._delegate,g,I))}signInWithPhoneNumber(g,I){return oe(this._delegate,y.s(this._delegate,g,I))}signInWithPopup(g){var I=this;return(0,R.Z)(function*(){return Ae(de(),I._delegate,"operation-not-supported-in-this-environment"),X(I._delegate,y.c(I._delegate,g,he))})()}signInWithRedirect(g){var I=this;return(0,R.Z)(function*(){return Ae(de(),I._delegate,"operation-not-supported-in-this-environment"),yield Se(I._delegate),y.f(I._delegate,g,he)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return y.a7(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=be,w})();function et(w,m,g){let I=w;"function"!=typeof w&&({next:I,error:m,complete:g}=w);const T=I;return{next:j=>T(j&&ye.getOrCreate(j)),error:m,complete:g}}function fi(w,m){const g=function le(w,m){const g=ce();if(!g)return[];const I=y.aD(W,w,m);switch(g.getItem(I)){case be.NONE:return[y.N];case be.LOCAL:return[y.i,y.a];case be.SESSION:return[y.a];default:return[]}}(w,m);if(typeof self<"u"&&!g.includes(y.i)&&g.push(y.i),typeof window<"u")for(const I of[y.b,y.a])g.includes(I)||g.push(I);return g.includes(y.N)||g.push(y.N),g}class lt{constructor(){this.providerId="phone",this._delegate=new y.P(we(P.Z.auth()))}static credential(m,g){return y.P.credential(m,g)}verifyPhoneNumber(m,g){return this._delegate.verifyPhoneNumber(m,g)}unwrap(){return this._delegate}}lt.PHONE_SIGN_IN_METHOD=y.P.PHONE_SIGN_IN_METHOD,lt.PROVIDER_ID=y.P.PROVIDER_ID;const Mt=y.aA;class Vn{constructor(m,g,I=P.Z.app()){var T;Mt(null===(T=I.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new y.R(m,g,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function tt(w){w.INTERNAL.registerComponent(new O.wA("auth-compat",m=>{const g=m.getProvider("app-compat").getImmediate(),I=m.getProvider("auth");return new Fe(g,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:y.A.EMAIL_SIGNIN,PASSWORD_RESET:y.A.PASSWORD_RESET,RECOVER_EMAIL:y.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:y.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:y.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:y.A.VERIFY_EMAIL}},EmailAuthProvider:y.Q,FacebookAuthProvider:y.U,GithubAuthProvider:y.W,GoogleAuthProvider:y.V,OAuthProvider:y.X,SAMLAuthProvider:y.Y,PhoneAuthProvider:lt,PhoneMultiFactorGenerator:y.m,RecaptchaVerifier:Vn,TwitterAuthProvider:y.Z,Auth:Fe,AuthCredential:y.J,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.4.2")}(P.Z)}}]);